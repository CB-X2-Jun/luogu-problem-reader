name: 🤖 自动回复评论Bot

on:
  schedule:
    # 每30分钟检查一次新评论
    - cron: '*/30 * * * *'
  
  workflow_dispatch:
    # 支持手动触发
    inputs:
      hours:
        description: '检查最近几小时的评论'
        required: false
        default: '2'
        type: string

jobs:
  comment-bot:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install requests
    
    - name: Run Comment Bot
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: |
        echo "🤖 启动自动回复评论Bot..."
        python scripts/comment_bot.py
    
    - name: Log Bot Activity
      run: |
        echo "📊 Bot运行统计:"
        echo "- 运行时间: $(date)"
        echo "- 仓库: ${{ github.repository }}"
        echo "- 触发方式: ${{ github.event_name }}"
