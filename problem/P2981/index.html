<!doctype html>
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="æ´›è°·é¢˜ç›®æµè§ˆç«™é¢˜ç›®è¯¦æƒ…">
    <meta name="author" content="CB_X2_Jun">
    <link rel="canonical" href="https://lglg.netlify.app/problem/P2981/">
    <link rel="icon" href="../../assets/images/favicon.png">
    <meta name="generator" content="mkdocs-material">
    <title>P2981 [USACO10FEB] Cows on Ice G</title>
    <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
    <style>
      :root { --md-text-font: "Roboto"; --md-code-font: "Roboto Mono" }
      
      /* ç¾åŒ–é¢˜ç›®é¡µé¢æ ·å¼ */
      .md-content__inner {
        max-width: 1000px;
        margin: 0 auto;
      }
      
      /* é¢˜ç›®æ ‡é¢˜ç¾åŒ– */
      .md-content__inner h1 {
        color: #2c3e50;
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 2rem;
        text-align: center;
        padding: 1rem 0;
        border-bottom: 3px solid #3498db;
      }
      
      /* é¢˜ç›®å†…å®¹åŒºå—ç¾åŒ– */
      .md-content__inner h2 {
        background: #f8f9fa;
        color: #2c3e50;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        border-left: 4px solid #3498db;
        margin: 2rem 0 1rem 0;
        font-size: 1.3rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        font-weight: 600;
      }
      
      /* ä»£ç å—ç¾åŒ– */
      .md-content__inner pre {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        margin: 1.5rem 0;
      }
      
      .md-content__inner pre code {
        background: transparent;
        color: #2c3e50;
        padding: 0;
        border-radius: 0;
        font-weight: 400;
      }
      
      .md-content__inner code {
        background: #e9ecef;
        color: #495057;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-weight: 500;
      }
      
      /* æ ·ä¾‹åŒºå—ç‰¹æ®Šç¾åŒ– */
      .md-content__inner h3:contains("æ ·ä¾‹") {
        background: #f0f8ff;
        color: #2c3e50;
        padding: 0.8rem 1.2rem;
        border-radius: 6px;
        border-left: 4px solid #17a2b8;
        margin: 1.5rem 0 0.8rem 0;
        font-size: 1.1rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        font-weight: 600;
      }
      
      /* æ™®é€šæ®µè½ç¾åŒ– */
      .md-content__inner p {
        line-height: 1.8;
        margin: 1rem 0;
        color: #444;
      }
      
      /* åˆ—è¡¨ç¾åŒ– */
      .md-content__inner ul, .md-content__inner ol {
        padding-left: 2rem;
        margin: 1rem 0;
      }
      
      .md-content__inner li {
        margin: 0.5rem 0;
        line-height: 1.6;
      }
      
      /* è¡¨æ ¼ç¾åŒ– */
      .md-content__inner table {
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        margin: 1.5rem 0;
      }
      
      .md-content__inner th {
        background: #e9ecef;
        color: #495057;
        font-weight: 600;
      }
      
      /* è¿”å›æŒ‰é’®ç¾åŒ– */
      .back-button {
        display: inline-block;
        background: #3498db;
        color: white;
        padding: 0.8rem 1.5rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        margin: 2rem 0;
        transition: background-color 0.3s;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      
      .back-button:hover {
        background: #2980b9;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        color: white;
        text-decoration: none;
      }
      
      /* Giscusè¯„è®ºåŒºåŸŸæ ·å¼ */
      .comments-section {
        margin: 3rem 0 2rem 0;
        padding: 2rem;
        background: #f8f9fa;
        border-radius: 12px;
        border: 1px solid #e9ecef;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      }
      
      .comments-title {
        color: #2c3e50;
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #3498db;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      
      /* è‡ªå®šä¹‰Giscusæ ·å¼ */
      .giscus {
        margin-top: 1rem;
      }
      
      .giscus-frame {
        border-radius: 8px;
        border: 1px solid #e9ecef;
      }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
  </head>
  <body dir="ltr">
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      <a href="#é¢˜ç›®å†…å®¹" class="md-skip">è·³è½¬è‡³</a>
    </div>
    <div data-md-component="announce"></div>
    
    <div id="__config" data-md-config="{&quot;base&quot;:&quot;../..&quot;,&quot;features&quot;:[],&quot;search&quot;:{&quot;worker&quot;:&quot;assets/javascripts/workers/search.b8dbb3d2.min.js&quot;}}"></div>
    
    <header class="md-header md-header--shadow" data-md-component="header">
      <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
        <a href="/" title="æ´›è°·é¢˜ç›®æµè§ˆç«™" class="md-header__button md-logo" aria-label="æ´›è°·é¢˜ç›®æµè§ˆç«™" data-md-component="logo">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
        </a>
        <label class="md-header__button md-icon" for="__drawer">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
        </label>
        <div class="md-header__title" data-md-component="header-title">
          <div class="md-header__ellipsis">
            <div class="md-header__topic">
              <span class="md-ellipsis">æ´›è°·é¢˜ç›®æµè§ˆç«™</span>
            </div>
            <div class="md-header__topic" data-md-component="header-topic">
              <span class="md-ellipsis">P2981 [USACO10FEB] Cows on Ice G</span>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <div class="md-container" data-md-component="container">
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          <!-- ä¾§è¾¹æ å¯¼èˆª -->
          <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" aria-label="å¯¼èˆªæ " data-md-level="0">
                  <label class="md-nav__title" for="__drawer">
                    <a href="/" title="æ´›è°·é¢˜ç›®æµè§ˆç«™" class="md-nav__button md-logo" aria-label="æ´›è°·é¢˜ç›®æµè§ˆç«™" data-md-component="logo">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
                    </a>
                    æ´›è°·é¢˜ç›®æµè§ˆç«™
                  </label>
                  <ul class="md-nav__list" data-md-scrollfix>
                    <li class="md-nav__item">
                      <a href="/" class="md-nav__link">
                        <span class="md-ellipsis">ğŸ  é¦–é¡µ</span>
                      </a>
                    </li>
                    <li class="md-nav__item">
                      <a href="/problem/list/" class="md-nav__link">
                        <span class="md-ellipsis">ğŸ“‹ é¢˜ç›®åˆ—è¡¨</span>
                      </a>
                    </li>
                    <li class="md-nav__item">
                      <a href="/about/" class="md-nav__link">
                        <span class="md-ellipsis">â„¹ï¸ å…³äº</span>
                      </a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              <h2 id="_1">é¢˜ç›®æè¿°</h2>
<p>Bessie is ice skating on a large frozen lake modelled as a 2-dimensional grid with coordinates in the range -1,000,000,000..1,000,000,000. N (1 &lt;= N &lt;= 20,000) of the lake's grid cells contain rocks</p>
<p>(conveniently numbered 1..N). The other cells contain slippery ice.</p>
<p>Since Bessie is not a very good skater, she traverses the lake's cells by pushing herself away from her current position near a rock and sliding continuously in the same direction until she hits another rock (stopping in the square before she hits the rock, of course). Never good with complicated angles, Bessie can push herself only straight north, east, south, or west. She can't push herself through the rock, of course, and thus generally has only three possible directions to move.</p>
<p>Sliding is not without risks. Bessie must hit a rock or might end up sliding for a very long time. She must aim her pushes carefully.</p>
<p>Consider the situation depicted below; Bessie wants to get to</p>
<p>location (x=5,y=1), which is east of her current location (. = ice, * = rock, B = Bessie, G = goal). If she slides directly to the east, she will slide past the location since she can stop only by</p>
<p>encountering a rock head on. One way to get to (5,1) is the following:</p>
<p>(a)              (b)             (c)              (d) </p>
<p>4 .....*.         .....*.         .....*.          .....*.</p>
<p>3 ..*....  slide  ..*....  slide  ..*....   slide  ..*....</p>
<p>2 ......*  north  ..B...*  east   .....B*   south  ......*</p>
<p>1 .*B..G. ------&gt; .*...G. ------&gt; .*...G.  ------&gt; .*...B.</p>
<p>0 *....*.         *....*.         *....*.          *....*.</p>
<p>0123456</p>
<p>Bessie could slide north, east, or south in situation (a), but only north has a rock for stopping. For situation (b), she can slide only east for the same reason.</p>
<p>For the input, rock i is located at cell X_i,Y_i (-1,000,000,000 &lt;= X_i &lt;= 1,000,000,000; -1,000,000,000 &lt;= Y_i &lt;= 1,000,000,000), and no two rocks occupy the same position. Bessie starts at Bx,By (which is next to a rock) (-1,000,000,000 &lt;= Bx &lt;= 1,000,000,000; -1,000,000,000 &lt;= By &lt;= 1,000,000,000). Bessie's goal is Gx,Gy (-1,000,000,000 &lt;= Gx &lt;= 1,000,000,000; -1,000,000,000 &lt;= Gy &lt;= 1,000,000,000). Bessie can always reach the goal one way or another.</p>
<p>Bessie doesn't mind sliding. However, pushing herself away from a rock is very tiring. To prepare her, FJ would like to know the minimum number of pushes Bessie needs to do.</p>
<p>Bessie åœ¨ä¸€ä¸ªå†°å°çš„æ¹–é¢ä¸Šæ¸¸æ³³ï¼Œæ¹–é¢å¯ä»¥è¡¨ç¤ºä¸ºäºŒç»´çš„å¹³é¢ï¼Œåæ ‡èŒƒå›´æ˜¯-1,000,000,000..1,000,000,000ã€‚æ¹–é¢ä¸Šçš„N(1 &lt;= N &lt;= 20,000)ä¸ªä½ç½®æœ‰çŸ³å—(ç¼–å·åˆ†åˆ«ä¸º1åˆ°N)ï¼Œå…¶å®ƒä½ç½®æ˜¯å†°é¢ã€‚ç”±äºBessieæ»‘å†°æŠ€æœ¯ä¸å¤Ÿå¥½ï¼Œå¥¹é€šè¿‡æ¨åŠ¨è‡ªå·±æ—è¾¹çš„çŸ³å—ï¼Œä¾é åä½œç”¨åŠ›å‘æŸä¸€ä¸ªæ–¹å‘å‰è¿›ï¼Œåœ¨ç¢°åˆ°ä¸€ä¸ªæ–°çš„çŸ³å—ä¹‹å‰ï¼ŒBessieæ˜¯ä¸ä¼šåœä¸‹æ¥çš„ã€‚(å½“ç„¶ï¼Œæœ€åä¼šåœç•™åœ¨æŸå—çŸ³å—çš„å‰ä¸€ä¸ªæ ¼å­é‡Œ)ç”±äºBessieæ— æ³•è®¡ç®—å¤æ‚çš„è§’åº¦ï¼Œå¥¹åªèƒ½å¤Ÿå‘ä¸œå—è¥¿åŒ—å››ä¸ªæ–¹å‘å‰è¿›ã€‚</p>
<p>å¾ˆæ˜¾ç„¶ï¼ŒBessieä¸èƒ½å¤Ÿç©¿è¶ŠçŸ³å—ï¼Œå› æ­¤ï¼ŒBessieä»…ä»…å¯ä»¥å‘ä¸‰ä¸ªæ–¹å‘æ»‘ã€‚ æ»‘å†°ä¸æ˜¯æ²¡æœ‰é£é™©ï¼ŒBessieæ»‘å‘æŸä¸ªæ–¹å‘åå¿…é¡»èƒ½ç¢°åˆ°æŸä¸ªçŸ³å—ï¼Œå› æ­¤å¥¹å¿…é¡»å¾ˆå°å¿ƒã€‚è€ƒè™‘ä¸‹é¢çš„ä¸€ä¸ªæƒ…å†µï¼ŒBessieå¸Œæœ›åˆ°è¾¾åœ¨å¥¹ä¸œé¢çš„ç›®æ ‡ä½ç½®(x=5,y=1)ï¼Œ(â€¦</p>
<h2 id="_2">è¾“å…¥æ ¼å¼</h2>
<p>* Line 1: Five space separated integers: N, Bx, By, Gx, and Gy</p>
<p>* Lines 2..N+1: Line i+1 describes a rock location with space</p>
<p>separated integers: X_i and Y_i</p>
<h2 id="_3">è¾“å‡ºæ ¼å¼</h2>
<p>* Line 1: A single integer that is the minimum number of pushes for Bessie to get to her goal</p>
<h2 id="_4">è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2>
<h3 id="1">æ ·ä¾‹ #1</h3>
<h4 id="1_1">æ ·ä¾‹è¾“å…¥ #1</h4>
<pre class="codehilite"><code>6 2 1 5 1 
5 4 
2 3 
1 1 
6 2 
5 0 
0 0
</code></pre>

<h4 id="1_2">æ ·ä¾‹è¾“å‡º #1</h4>
<pre class="codehilite"><code>3
</code></pre>
              
              <!-- Giscusè¯„è®ºç³»ç»Ÿ -->
              <div class="comments-section">
                <div class="comments-title">
                  ğŸ’¬ è®¨è®ºäº¤æµ
                </div>
                <script src="https://giscus.app/client.js"
                        data-repo="Eternity-Sky/luogu-problem-reader"
                        data-repo-id="R_kgDOPiP5uw"
                        data-category="Announcements"
                        data-category-id="DIC_kwDOPiP5u84CugHo"
                        data-mapping="url"
                        data-strict="0"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="bottom"
                        data-theme="preferred_color_scheme"
                        data-lang="zh-CN"
                        data-loading="lazy"
                        crossorigin="anonymous"
                        async>
                </script>
              </div>
            </article>
          </div>
        </div>
      </main>
      <footer class="md-footer">
        <div class="md-footer-meta md-typeset">
          <div class="md-footer-meta__inner md-grid">
            <div class="md-copyright">
              <div class="md-copyright__highlight">Â© 2025 æ´›è°·é¢˜ç›®æµè§ˆç«™</div>
              Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">Material for MkDocs</a>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      if (typeof hljs !== 'undefined') {
        hljs.highlightAll();
      }
    </script>
    <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
    <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, { 
          delimiters: [
            {"left":"$$","right":"$$","display":true},
            {"left":"$","right":"$","display":false},
            {"left":"\\(","right":"\\)","display":false},
            {"left":"\\[","right":"\\]","display":true}
          ],
          throwOnError: false,
          strict: false,
          trust: true
        });
      });
    </script>
  </body>
</html>