<!doctype html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="LGOJ é¢˜ç›®æµè§ˆç«™ - æ´›è°·é¢˜ç›®è¯¦æƒ…">
    <meta name="author" content="LGOJ Team">
    <link rel="canonical" href="https://lglg.netlify.app/problem/P2988/">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1336/1336494.png" type="image/png">
    <meta name="generator" content="LGOJ é¢˜ç›®æµè§ˆç«™">
    <title>P2988 P2988 [USACO10MAR] Test Taking S - LGOJ é¢˜ç›®æµè§ˆç«™</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      :root {
        --primary-color: #2563eb;
        --primary-dark: #1d4ed8;
        --secondary-color: #10b981;
        --accent-color: #8b5cf6;
        --danger-color: #ef4444;
        --warning-color: #f59e0b;
        --dark-color: #1f2937;
        --light-color: #f9fafb;
        --gray-50: #f9fafb;
        --gray-100: #f3f4f6;
        --gray-200: #e5e7eb;
        --gray-300: #d1d5db;
        --gray-400: #9ca3af;
        --gray-500: #6b7280;
        --gray-600: #4b5563;
        --gray-700: #374151;
        --gray-800: #1f2937;
        --gray-900: #111827;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        --transition: all 0.2s ease-in-out;
      }
      { --md-text-font: "Roboto"; --md-code-font: "Roboto Mono" }
      
      /* LGOJ é¢˜ç›®é¡µé¢æ ·å¼ */
      body {
        font-family: 'Inter', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        background-color: #fff;
        color: var(--gray-900);
        line-height: 1.6;
        margin: 0;
        padding: 0;
      }
      
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }
      
      /* é¡µé¢å¤´éƒ¨ */
      .lgoj-header {
        background: white;
        border-bottom: 1px solid var(--gray-200);
        padding: 1rem 0;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: var(--shadow-sm);
      }
      
      .lgoj-header .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .lgoj-header .logo {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-color);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      
      .lgoj-header .logo:hover {
        color: var(--primary-dark);
      }
      
      .lgoj-header nav {
        display: flex;
        gap: 2rem;
      }
      
      .lgoj-header nav a {
        color: var(--gray-700);
        text-decoration: none;
        font-weight: 500;
        transition: var(--transition);
      }
      
      .lgoj-header nav a:hover {
        color: var(--primary-color);
      }
      
      /* ä¸»è¦å†…å®¹åŒºåŸŸ */
      .main-content {
        min-height: calc(100vh - 200px);
        padding: 2rem 0;
      }
      
      .problem-content {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: var(--shadow);
      }
      
      /* é¡µè„š */
      .lgoj-footer {
        background: var(--gray-50);
        border-top: 1px solid var(--gray-200);
        padding: 2rem 0;
        text-align: center;
        color: var(--gray-600);
      }
      
      /* é¢˜ç›®æ ‡é¢˜ç¾åŒ– */
      .md-content__inner h1 {
        color: var(--gray-900);
        font-size: 2.5rem;
        font-weight: 800;
        margin-bottom: 2rem;
        text-align: center;
        padding: 2rem 0 1rem 0;
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        border-bottom: 2px solid var(--gray-200);
      }
      
      /* é¢˜ç›®å†…å®¹åŒºå—ç¾åŒ– */
      .md-content__inner h2 {
        background: var(--gray-50);
        color: var(--gray-900);
        padding: 1rem 1.5rem;
        border-radius: 8px;
        border-left: 4px solid var(--primary-color);
        margin: 2rem 0 1rem 0;
        font-size: 1.3rem;
        box-shadow: var(--shadow);
        font-weight: 600;
      }
      
      /* ä»£ç å—ç¾åŒ– */
      .md-content__inner pre {
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: var(--shadow);
        margin: 1.5rem 0;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      .md-content__inner pre code {
        background: transparent;
        color: var(--gray-800);
        padding: 0;
        border-radius: 0;
        font-weight: 400;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      .md-content__inner code {
        background: var(--gray-100);
        color: var(--gray-800);
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-weight: 500;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      /* æ ·ä¾‹åŒºå—ç‰¹æ®Šç¾åŒ– */
      .md-content__inner h3 {
        background: linear-gradient(135deg, var(--secondary-color), #059669);
        color: white;
        padding: 0.8rem 1.2rem;
        border-radius: 6px;
        margin: 1.5rem 0 0.8rem 0;
        font-size: 1.1rem;
        box-shadow: var(--shadow);
        font-weight: 600;
      }
      
      /* æ™®é€šæ®µè½ç¾åŒ– */
      .md-content__inner p {
        line-height: 1.8;
        margin: 1rem 0;
        color: var(--gray-700);
        font-size: 1rem;
      }
      
      /* ä¸»è¦å†…å®¹å®¹å™¨ - ç¡®ä¿ä¸è¶…å‡ºé¡µé¢è¾¹ç•Œ */
      .md-content__inner {
        max-width: 100%;
        width: 100%;
        box-sizing: border-box;
        overflow-x: hidden;
        padding: 0 1rem;
      }
      

      
      /* é˜²æ­¢å›¾ç‰‡è¿‡å¤§å½±å“å¸ƒå±€ */
      .md-content__inner img[src*="latex"] {
        display: inline;
        margin: 0;
        box-shadow: none;
        border-radius: 0;
        vertical-align: middle;
      }
      
      /* åˆ—è¡¨ç¾åŒ– */
      .md-content__inner ul, .md-content__inner ol {
        padding-left: 2rem;
        margin: 1rem 0;
      }
      
      .md-content__inner li {
        margin: 0.5rem 0;
        line-height: 1.7;
        color: var(--gray-600);
      }
      
      /* è¡¨æ ¼ç¾åŒ– */
      .md-content__inner table {
        width: 100%;
        border-collapse: collapse;
        margin: 1.5rem 0;
        box-shadow: var(--shadow);
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid var(--gray-200);
      }
      
      .md-content__inner th {
        background: var(--primary-color);
        color: white;
        padding: 1rem;
        text-align: left;
        font-weight: 600;
      }
      
      .md-content__inner td {
        padding: 0.8rem 1rem;
        border-bottom: 1px solid var(--gray-200);
      }
      
      .md-content__inner tr:nth-child(even) {
        background: var(--gray-50);
      }
      
      /* å¼ºè°ƒæ–‡æœ¬ç¾åŒ– */
      .md-content__inner strong {
        color: var(--gray-900);
        font-weight: 600;
      }
      
      .md-content__inner em {
        color: var(--gray-600);
        font-style: italic;
      }
      
      /* é“¾æ¥ç¾åŒ– */
      .md-content__inner a {
        color: var(--primary-color);
        text-decoration: none;
        border-bottom: 1px solid transparent;
        transition: var(--transition);
      }
      
      .md-content__inner a:hover {
        color: var(--primary-dark);
        border-bottom-color: var(--primary-dark);
      }
      
      /* æ´›è°·ç™»å½•åŠŸèƒ½æ ·å¼ */
      .luogu-auth-section {
        margin-left: auto;
      }
      
      .login-btn {
        background: var(--primary-color);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        text-decoration: none;
        font-size: 0.9rem;
        font-weight: 500;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }
      
      .login-btn:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
        box-shadow: var(--shadow);
      }
      
      .user-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.5rem;
        background: var(--gray-50);
        border-radius: 8px;
        border: 1px solid var(--gray-200);
      }
      
      .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid var(--gray-300);
      }
      
      .user-name {
        font-weight: 500;
        color: var(--gray-700);
        font-size: 0.9rem;
      }
      
      .logout-btn {
        background: none;
        border: none;
        color: var(--gray-500);
        cursor: pointer;
        padding: 0.25rem;
        border-radius: 4px;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .logout-btn:hover {
        background: var(--gray-200);
        color: var(--danger-color);
      }
      
      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .luogu-auth-section {
          margin-left: 0;
          margin-top: 0.5rem;
        }
        
        .user-info {
          padding: 0.4rem;
          gap: 0.5rem;
        }
        
        .user-avatar {
          width: 28px;
          height: 28px;
        }
        
        .user-name {
          font-size: 0.8rem;
        }
      }
      
      /* å¼•ç”¨å—ç¾åŒ– */
      .md-content__inner blockquote {
        border-left: 4px solid var(--warning-color);
        background: #fefbf3;
        padding: 1rem 1.5rem;
        margin: 1.5rem 0;
        border-radius: 0 8px 8px 0;
        color: var(--gray-700);
        font-style: italic;
      }
      
      /* æ°´å¹³åˆ†å‰²çº¿ç¾åŒ– */
      .md-content__inner hr {
        border: none;
        height: 2px;
        background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        margin: 2rem 0;
      }
      
      /* å¯¼èˆªæ å“ç‰Œæ›´æ–° */
      .md-header__title .md-header__ellipsis .md-ellipsis {
        color: var(--primary-color);
        font-weight: 700;
      }
      
      /* è¿”å›é¦–é¡µæŒ‰é’® */
      .return-home-btn {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: 500;
        box-shadow: var(--shadow-lg);
        transition: var(--transition);
        z-index: 1000;
      }
      
      .return-home-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        color: white;
        text-decoration: none;
      }
      
      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .md-content__inner {
          padding: 1rem;
        }
        
        .md-content__inner h1 {
          font-size: 2rem;
        }
        
        .md-content__inner h2 {
          font-size: 1.2rem;
          padding: 0.8rem 1rem;
        }
        
        .md-content__inner pre {
          padding: 1rem;
          font-size: 0.9rem;
        }
        
        .lgoj-home-btn {
          position: static;
          margin: 1rem 0;
          width: 100%;
          justify-content: center;
        }
      }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
  </head>
  <body>
    <!-- ç®€æ´çš„é¡µé¢å¤´éƒ¨ -->
    <header class="lgoj-header">
      <div class="container">
        <a href="/" class="logo">
          <i class="fas fa-book"></i>
          LGOJ é¢˜ç›®æµè§ˆç«™
        </a>
        <nav>
          <a href="/">é¦–é¡µ</a>
          <a href="/problem/list">é¢˜åº“</a>
          <a href="/about">å…³äº</a>
          
          <!-- æ´›è°·ç™»å½•çŠ¶æ€åŒºåŸŸ -->
          <div class="luogu-auth-section">
            <!-- æœªç™»å½•çŠ¶æ€ -->
            <div id="loginSection" class="login-section">
              <a href="/login.html" class="login-btn">
                <i class="fas fa-sign-in-alt"></i>
                æ´›è°·ç™»å½•
              </a>
            </div>
            
            <!-- å·²ç™»å½•çŠ¶æ€ -->
            <div id="userInfo" class="user-info" style="display: none;">
              <img id="userAvatar" class="user-avatar" alt="ç”¨æˆ·å¤´åƒ">
              <span id="userName" class="user-name">ç”¨æˆ·</span>
              <button onclick="logout()" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
              </button>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="main-content">
      <div class="container">
        <div class="problem-content">
          <h2 id="_1">é¢˜ç›®æè¿°</h2>
<p>Farmer John has to take his annual farming license test. The test comprises N (1 &lt;= N &lt;= 1,000,000) true/false questions. After FJ's dismal performance on last year's test Bessie wishes to help him.</p>
<p>Bessie has inside information that the number of questions whose answer is true will be one of t_1, t_2, t_3,..., or t_K (0 &lt;= t_i &lt;= N; 0 &lt;= K &lt;= 10,000) -- even though Bessie has no information about any answer to any specific question. Bessie wants to know the best score that FJ is guaranteed achieve by exploiting this information carefully, even if he doesn't know the actual answers to any test questions.</p>
<p>To demonstrate Bessie's idea, consider a license test with N=6 questions where Bessie knows that the number of questions with the answer 'true' is either 0 or 3. FJ can always get at least 3 answers correct using logic like this: If FJ answers 'false' on every</p>
<p>question and there are 0 questions with the answer 'true' then he will get all 6 correct. If there are 3 questions with the answer 'true' then he will get 3 answers correct. So as long as he marks every answer as 'false' he is guaranteed to get at least 3 correct without knowing any answer to the test questions.</p>
<p>On the other hand, consider what happens if FJ chooses an inferior strategy: he guesses that some 3 answers are 'true' and the other 3 are 'false'. If it turns out that NO answers are 'true' then FJ will get 3 answers correct, the ones he guessed were false. If 3 answers are 'true' then FJ could get as few as 0 answers correct. If he answered incorrectly on all 3 of that answers for which he guessed 'true', and the other 3 (for which he guessed 'false') are true, then he gets 0 correct answers. Even though FJ could get 3 correct in this case by guessing 'false' every time, he can not always guarantee even 1 correct by guessing some 3 answers as 'true', so this strategy can not guarantee getting any answer correct. FJ should use the previous paragraph's strategy.</p>
<p>Given Bessie's inside information, determine the number of answers FJ can always get correct using this information assuming he uses it optimally.</p>
<p>Farmer Johnè¦å‚åŠ ä¸€å¹´ä¸€åº¦çš„å†œæ°‘èµ„æ ¼è€ƒè¯•ã€‚è€ƒè¯•å¾ˆç®€å•ï¼Œåªæœ‰Nä¸ª ï¼ˆ1â‰¤Nâ‰¤1ï¼Œ000ï¼Œ000)true/falseçš„åˆ¤æ–­é¢˜ã€‚ç„¶è€ŒFJå»å¹´è€ƒè¯•å´â€œæ¯å…·â€äº†ï¼ŒBessieï¼šå¸Œæœ›ä»Šå¹´èƒ½å¸®å¸®ä»–ã€‚</p>
<p>Bessieå¾—åˆ°å¯é çš„å†…éƒ¨æ¶ˆæ¯ï¼Œæœ‰å¯èƒ½æœ‰T_1ï¼ŒT_2ï¼ŒT_3ï¼Œ...ï¼Œæˆ–T_K(0â‰¤T_iâ‰¤Nï¼›0â‰¤Kâ‰¤10ï¼Œ000)</p>
<p>é“é¢˜çš„ç­”æ¡ˆä¸ºtureï¼šï¼Œä½†å…·ä½“å“ªé“é¢˜çš„ç­”æ¡ˆæ˜¯ä»€ä¹ˆå´ä¸çŸ¥é“ã€‚Bessieå¸Œæœ›çŸ¥é“åœ¨è®¤çœŸç ”ç©¶äº†è¿™äº›å†…éƒ¨æ¶ˆæ¯å(è™½ç„¶ä¸èƒ½ç¡®å®šä»»ä½•ä¸€é“é¢˜çš„å…·ä½“ç­”æ¡ˆ)ï¼Œä¸€å®šä¿è¯FJè€ƒè¯•æ—¶èƒ½è·å¾—çš„æœ€é«˜åˆ†æ•°æ˜¯å¤šå°‘?</p>
<p>ä¸ºäº†è¯´æ˜Bessieçš„æƒ³æ³•ï¼Œè€ƒè™‘N=6çš„ä¸€æ¬¡è€ƒè¯•ï¼ŒBessieçŸ¥é“ç­”æ¡ˆä¸ºtrueçš„é¢˜çš„æ•°é‡æ˜¯0æˆ–è€…3ã€‚FJå¯ä»¥æŒ‰è¿™æ ·çš„åšé¢˜ç­–ç•¥æ¥ç­”å¯¹è‡³å°‘3é¢˜ï¼šå¦‚æœFJå…¨éƒ¨ç­”'false'ï¼Œé‚£ä¹ˆå½“æœ‰0é“é¢˜çš„æ­£ç¡®ç­”æ¡ˆæ˜¯'true'ï¼Œåˆ™FJç­”å¯¹6é¢˜ï¼›è€Œå½“æœ‰3é“é¢˜çš„æ­£ç¡®ç­”æ¡ˆæ˜¯'true'ï¼Œåˆ™FJç­”å¯¹3é¢˜ã€‚å› æ­¤ï¼Œåªè¦FJéƒ¨ç­”'false'ï¼Œé‚£ä¹ˆè‡³å°‘ä¸€å®šèƒ½ç­”å¯¹3é¢˜ï¼Œå°½ç®¡FJå¹¶ä¸çŸ¥é“æ¯é“é¢˜çš„ç¡®åˆ‡ç­”æ¡ˆã€‚</p>
<p>å¦ä¸€æ–¹é¢ï¼Œè€ƒè™‘å¦‚æœFJé€‰æ‹©äº†å¦ä¸€ç§éæœ€ä¼˜çš„åšé¢˜ç­–ç•¥ï¼šä»–çŒœæµ‹æŸ3é“é¢˜ä¸º'true'è€Œå¦3é“é¢˜ä¸º'false'ã€‚å½“æ‰€æœ‰é¢˜ç›®çš„æ­£ç¡®ç­”æ¡ˆæ˜¯'false'æ—¶ï¼Œé‚£ä¹ˆFJèƒ½ç­”å¯¹3é“é¢˜ã€‚è€Œå½“æœ‰3é“é¢˜çš„æ­£ç¡®ç­”æ¡ˆæ˜¯'true'æ—¶ï¼Œé‚£ä¹ˆFJæœ‰å¯èƒ½ä¸€é“é¢˜éƒ½ç­”ä¸å¯¹ã€‚è¿™æ˜¯å› ä¸ºFJæœ‰å¯èƒ½æŠŠ3é“æ­£ç¡®ç­”æ¡ˆä¸º'true'çš„é¢˜å…¨çŒœæˆ'false'!è¿™è¯´æ˜è¿™ç§åšé¢˜ç­–ç•¥ä¸å¦‚å‰ä¸€ç§ä¼˜ç§€ã€‚</p>
<p>ç»™å‡ºBessieè·å¾—çš„å†…éƒ¨æ¶ˆæ¯ï¼Œè®¡ç®—å‡ºFJé‡‡ç”¨æœ€ä¼˜åšé¢˜ç­–ç•¥ä¿è¯èƒ½å¾—åˆ°çš„æœ€é«˜åˆ†æ•°æ˜¯å¤šå°‘?</p>
<p>ç¬¬1è¡Œï¼š2ä¸ªæ•´æ•°Nï¼ŒK</p>
<p>ç¬¬2â€¦K+1è¡Œï¼šç¬¬i+1è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°t_i</p>
<p>ç¬¬1è¡Œï¼šä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºFJä¸€å®šèƒ½è·å¾—çš„æœ€é«˜åˆ†æ•°</p>
<h2 id="_2">è¾“å…¥æ ¼å¼</h2>
<p>* Line 1: Two space-separated integers: N and K</p>
<p>* Lines 2..K+1: Line i+1 contains a single integer: t_i</p>
<p>ç¬¬1è¡Œï¼š2ä¸ªæ•´æ•°Nï¼ŒK</p>
<p>ç¬¬2â€¦K+1è¡Œï¼šç¬¬i+1è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•°t_i</p>
<p>ç¬¬1è¡Œï¼šä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºFJä¸€å®šèƒ½è·å¾—çš„æœ€é«˜åˆ†æ•°</p>
<h2 id="_3">è¾“å‡ºæ ¼å¼</h2>
<p>* Line 1: A single integer, the best score FJ is guaranteed to achieve</p>
<h2 id="_4">è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2>
<h3 id="1">æ ·ä¾‹ #1</h3>
<h4 id="1_1">æ ·ä¾‹è¾“å…¥ #1</h4>
<div class="codehilite"><pre><span></span><code><span class="mf">6</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span>
<span class="mf">0</span><span class="w"> </span>
<span class="mf">3</span>
</code></pre></div>

<h4 id="1_2">æ ·ä¾‹è¾“å‡º #1</h4>
<div class="codehilite"><pre><span></span><code><span class="mf">3</span>
</code></pre></div>

<h2 id="_5">è¯´æ˜/æç¤º</h2>
<p>ç¿»è¯‘æä¾›ï¼š @fan404</p>
        </div>
        
        <!-- è¯„è®ºåŒºåŸŸ -->
        <div class="comments-section">
          <div class="comments-title">
            ğŸ’¬ è®¨è®ºäº¤æµ
          </div>
          <script src="https://giscus.app/client.js"
                  data-repo="Eternity-Sky/luogu-problem-reader"
                  data-repo-id="R_kgDOPiP5uw"
                  data-category="Announcements"
                  data-category-id="DIC_kwDOPiP5u84CugHo"
                  data-mapping="url"
                  data-strict="0"
                  data-reactions-enabled="1"
                  data-emit-metadata="0"
                  data-input-position="bottom"
                  data-theme="light"
                  data-lang="zh-CN"
                  crossorigin="anonymous"
                  async>
          </script>
        </div>
      </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="lgoj-footer">
      <div class="container">
        <p>Â© 2025 LGOJ é¢˜ç›®æµè§ˆç«™ | æ´›è°·é¢˜ç›®é™æ€æµè§ˆå¹³å°</p>
      </div>
    </footer>

    <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
    <a href="/" class="return-home-btn">
      <i class="fas fa-home"></i>
      è¿”å›é¦–é¡µ
    </a>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      if (typeof hljs !== 'undefined') {
        hljs.highlightAll();
      }
    </script>
    <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
    <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
    <script>
      // æ´›è°·APIä»£ç†å‡½æ•°
      async function proxyLuoguAPI(path, options = {}) {
        const { method = 'GET', body, headers = {}, sessionId } = options;
        
        const requestData = {
          path,
          method,
          headers,
          sessionId: sessionId || localStorage.getItem('luogu_session_id')
        };
        
        if (body) {
          requestData.body = body;
        }
        
        try {
          const response = await fetch('/netlify/functions/luogu-proxy', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(requestData)
          });
          
          return response;
        } catch (error) {
          console.error('ä»£ç†è¯·æ±‚å¤±è´¥:', error);
          throw error;
        }
      }
      
      // æ£€æŸ¥ç™»å½•çŠ¶æ€
      async function checkLoginStatus() {
        console.log('ğŸ” æ£€æŸ¥æ´›è°·ç™»å½•çŠ¶æ€...');
        
        // é¦–å…ˆæ£€æŸ¥localStorageä¸­æ˜¯å¦æœ‰ç”¨æˆ·ä¿¡æ¯
        const savedUserInfo = localStorage.getItem('luogu_user_info');
        if (savedUserInfo) {
          try {
            const userInfo = JSON.parse(savedUserInfo);
            console.log('âœ… ä»localStorageæ‰¾åˆ°ç”¨æˆ·ä¿¡æ¯:', userInfo);
            
            // æ£€æŸ¥ç™»å½•æ—¶é—´æ˜¯å¦è¿‡æœŸï¼ˆ24å°æ—¶ï¼‰
            const loginTime = new Date(userInfo.loginTime);
            const now = new Date();
            const hoursDiff = (now - loginTime) / (1000 * 60 * 60);
            
            if (hoursDiff < 24) {
              console.log(`âœ… ç”¨æˆ·ä¿¡æ¯æœ‰æ•ˆï¼ˆ${hoursDiff.toFixed(1)}å°æ—¶å‰ç™»å½•ï¼‰`);
              showUserInfo({
                name: userInfo.name || userInfo.username,
                uid: userInfo.uid,
                username: userInfo.username,
                avatar: userInfo.avatar
              });
              return true;
            } else {
              console.log('âš ï¸ ç”¨æˆ·ä¿¡æ¯å·²è¿‡æœŸï¼Œæ¸…é™¤localStorage');
              localStorage.removeItem('luogu_user_info');
            }
          } catch (error) {
            console.error('è§£ælocalStorageç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);
            localStorage.removeItem('luogu_user_info');
          }
        }
        
        showLoginButton();
        return false;
      }
      
      // æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
      function showUserInfo(user) {
        const userInfo = document.getElementById('userInfo');
        const loginSection = document.getElementById('loginSection');
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        
        if (!userInfo || !loginSection || !userAvatar || !userName) {
          console.log('âš ï¸ ç”¨æˆ·ä¿¡æ¯å…ƒç´ æœªæ‰¾åˆ°ï¼Œè·³è¿‡æ˜¾ç¤º');
          return;
        }
        
        // è®¾ç½®ç”¨æˆ·å¤´åƒ
        const defaultAvatar = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNmMGYwZjAiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDEyQzE0LjIwOTEgMTIgMTYgMTAuMjA5MSAxNiA4QzE2IDUuNzkwODYgMTQuMjA5MSA0IDEyIDRDOS43OTA4NiA0IDggNS43OTA4NiA4IDhDOCAxMC4yMDkxIDkuNzkwODYgMTIgMTIgMTJaIiBmaWxsPSIjOTk5Ii8+CjxwYXRoIGQ9Ik0xMiAxNEM5LjMzIDEzLjk5IDcgMTYuMzYgNyAxOS4wOVYyMEgxN1YxOS4wOUMxNyAxNi4zNiAxNC42NyAxMy45OSAxMiAxNFoiIGZpbGw9IiM5OTkiLz4KPC9zdmc+Cjwvc3ZnPgo8L3N2Zz4K';
        
        if (user.uid) {
          // æœ‰UIDï¼Œå°è¯•åŠ è½½çœŸå®å¤´åƒ
          userAvatar.src = `https://cdn.luogu.com.cn/upload/usericon/${user.uid}.png`;
          userAvatar.onerror = function() {
            console.log('çœŸå®å¤´åƒåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å¤´åƒ');
            this.src = defaultAvatar;
            this.onerror = null; // é˜²æ­¢æ— é™å¾ªç¯
          };
        } else {
          // æ²¡æœ‰UIDï¼Œç›´æ¥ä½¿ç”¨é»˜è®¤å¤´åƒ
          userAvatar.src = defaultAvatar;
        }
        
        // è®¾ç½®ç”¨æˆ·å
        userName.textContent = user.name || user.username || 'ç”¨æˆ·';
        
        // æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ï¼Œéšè—ç™»å½•æŒ‰é’®
        userInfo.style.display = 'flex';
        loginSection.style.display = 'none';
      }
      
      // æ˜¾ç¤ºç™»å½•æŒ‰é’®
      function showLoginButton() {
        const userInfo = document.getElementById('userInfo');
        const loginSection = document.getElementById('loginSection');
        
        if (userInfo && loginSection) {
          userInfo.style.display = 'none';
          loginSection.style.display = 'block';
        }
      }
      
      // é€€å‡ºç™»å½•
      async function logout() {
        try {
          // æ¸…é™¤localStorageä¸­çš„ç”¨æˆ·ä¿¡æ¯å’Œä¼šè¯ID
          localStorage.removeItem('luogu_user_info');
          localStorage.removeItem('luogu_session_id');
          console.log('ğŸšª å·²æ¸…é™¤ç”¨æˆ·ä¿¡æ¯å’Œä¼šè¯ID');
          
          showLoginButton();
          
          // å¯é€‰ï¼šè°ƒç”¨æ´›è°·é€€å‡ºAPI
          try {
            await proxyLuoguAPI('/api/auth/logout', { method: 'POST' });
          } catch (e) {
            // å¿½ç•¥é€€å‡ºAPIé”™è¯¯
            console.log('é€€å‡ºAPIè°ƒç”¨å¤±è´¥ï¼Œä½†æœ¬åœ°æ¸…ç†å·²å®Œæˆ');
          }
          
          console.log('âœ… å·²æˆåŠŸé€€å‡ºç™»å½•');
        } catch (error) {
          console.error('é€€å‡ºç™»å½•å¤±è´¥:', error);
        }
      }
      
      document.addEventListener("DOMContentLoaded", function() {
        // æ£€æŸ¥æ´›è°·ç™»å½•çŠ¶æ€
        checkLoginStatus();
        
        // æ¸²æŸ“æ•°å­¦å…¬å¼
        renderMathInElement(document.body, {
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false},
            {left: '\\(', right: '\\)', display: false},
            {left: '\\[', right: '\\]', display: true}
          ],
          throwOnError: false
        });
      });
    </script>
  </body>
</html>