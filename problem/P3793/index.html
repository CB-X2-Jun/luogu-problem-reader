<!doctype html>
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="洛谷题目浏览站题目详情">
    <meta name="author" content="CB_X2_Jun">
    <link rel="canonical" href="https://lglg.netlify.app/problem/P3793/">
    <link rel="icon" href="../../assets/images/favicon.png">
    <meta name="generator" content="mkdocs-material">
    <title>P3793 由乃救爷爷</title>
    <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
    <style>
      :root { --md-text-font: "Roboto"; --md-code-font: "Roboto Mono" }
      
      /* 美化题目页面样式 */
      .md-content__inner {
        max-width: 1000px;
        margin: 0 auto;
      }
      
      /* 题目标题美化 */
      .md-content__inner h1 {
        color: #2c3e50;
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 2rem;
        text-align: center;
        padding: 1rem 0;
        border-bottom: 3px solid #3498db;
      }
      
      /* 题目内容区块美化 */
      .md-content__inner h2 {
        background: #f8f9fa;
        color: #2c3e50;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        border-left: 4px solid #3498db;
        margin: 2rem 0 1rem 0;
        font-size: 1.3rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        font-weight: 600;
      }
      
      /* 代码块美化 */
      .md-content__inner pre {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        margin: 1.5rem 0;
      }
      
      .md-content__inner pre code {
        background: transparent;
        color: #2c3e50;
        padding: 0;
        border-radius: 0;
        font-weight: 400;
      }
      
      .md-content__inner code {
        background: #e9ecef;
        color: #495057;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-weight: 500;
      }
      
      /* 样例区块特殊美化 */
      .md-content__inner h3:contains("样例") {
        background: #f0f8ff;
        color: #2c3e50;
        padding: 0.8rem 1.2rem;
        border-radius: 6px;
        border-left: 4px solid #17a2b8;
        margin: 1.5rem 0 0.8rem 0;
        font-size: 1.1rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        font-weight: 600;
      }
      
      /* 普通段落美化 */
      .md-content__inner p {
        line-height: 1.8;
        margin: 1rem 0;
        color: #444;
      }
      
      /* 列表美化 */
      .md-content__inner ul, .md-content__inner ol {
        padding-left: 2rem;
        margin: 1rem 0;
      }
      
      .md-content__inner li {
        margin: 0.5rem 0;
        line-height: 1.6;
      }
      
      /* 表格美化 */
      .md-content__inner table {
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        margin: 1.5rem 0;
      }
      
      .md-content__inner th {
        background: #e9ecef;
        color: #495057;
        font-weight: 600;
      }
      
      /* 返回按钮美化 */
      .back-button {
        display: inline-block;
        background: #3498db;
        color: white;
        padding: 0.8rem 1.5rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        margin: 2rem 0;
        transition: background-color 0.3s;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      
      .back-button:hover {
        background: #2980b9;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        color: white;
        text-decoration: none;
      }
      
      /* Giscus评论区域样式 */
      .comments-section {
        margin: 3rem 0 2rem 0;
        padding: 2rem;
        background: #f8f9fa;
        border-radius: 12px;
        border: 1px solid #e9ecef;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      }
      
      .comments-title {
        color: #2c3e50;
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #3498db;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      
      /* 自定义Giscus样式 */
      .giscus {
        margin-top: 1rem;
      }
      
      .giscus-frame {
        border-radius: 8px;
        border: 1px solid #e9ecef;
      }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
  </head>
  <body dir="ltr">
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      <a href="#题目内容" class="md-skip">跳转至</a>
    </div>
    <div data-md-component="announce"></div>
    
    <div id="__config" data-md-config="{&quot;base&quot;:&quot;../..&quot;,&quot;features&quot;:[],&quot;search&quot;:{&quot;worker&quot;:&quot;assets/javascripts/workers/search.b8dbb3d2.min.js&quot;}}"></div>
    
    <header class="md-header md-header--shadow" data-md-component="header">
      <nav class="md-header__inner md-grid" aria-label="页眉">
        <a href="/" title="洛谷题目浏览站" class="md-header__button md-logo" aria-label="洛谷题目浏览站" data-md-component="logo">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
        </a>
        <label class="md-header__button md-icon" for="__drawer">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
        </label>
        <div class="md-header__title" data-md-component="header-title">
          <div class="md-header__ellipsis">
            <div class="md-header__topic">
              <span class="md-ellipsis">洛谷题目浏览站</span>
            </div>
            <div class="md-header__topic" data-md-component="header-topic">
              <span class="md-ellipsis">P3793 由乃救爷爷</span>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <div class="md-container" data-md-component="container">
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          <!-- 侧边栏导航 -->
          <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
                  <label class="md-nav__title" for="__drawer">
                    <a href="/" title="洛谷题目浏览站" class="md-nav__button md-logo" aria-label="洛谷题目浏览站" data-md-component="logo">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
                    </a>
                    洛谷题目浏览站
                  </label>
                  <ul class="md-nav__list" data-md-scrollfix>
                    <li class="md-nav__item">
                      <a href="/" class="md-nav__link">
                        <span class="md-ellipsis">🏠 首页</span>
                      </a>
                    </li>
                    <li class="md-nav__item">
                      <a href="/problem/list/" class="md-nav__link">
                        <span class="md-ellipsis">📋 题目列表</span>
                      </a>
                    </li>
                    <li class="md-nav__item">
                      <a href="/about/" class="md-nav__link">
                        <span class="md-ellipsis">ℹ️ 关于</span>
                      </a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              <h2 id="_1">题目背景</h2>
<p>大家看过葫芦娃吧？</p>
<p>没看过也没关系，让由乃告诉你吧</p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5725.png" /> </p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5740.png" /> </p>
<p>传说明斯克航空航天局里关着两个坦克，strv103b和krv。</p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5733.png" /> </p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5722.png" /> </p>
<p>鼠爷不小心打破了明斯克航空航天局，两个坦克逃了出来，从此其他坦克过上了水深火热的生活。</p>
<p>明斯克航空航天局急忙去告诉一个叫做serb的光头，只有YY出七辆图纸车，才能消灭这两个卖头势力。</p>
<p>serbYY出了七个连图纸都没有的车，却被瑞典人从bbs中窥见 。他们摧毁不了这七个YY车，</p>
<p>就把serb和鼠爷抓去。但是这时候七个坦克模型已经建出来了。</p>
<p>她们分别是 T28原型，T100lt，907工程，蟋蟀15，WZ111，FV215b183，FV215b</p>
<p>她们为了消灭卖头势力，救出serb和鼠爷，一个接一个去与卖头势力搏斗。</p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5723.png" /> </p>
<p>T28原是正面很硬的TD，但装甲在金币弹面前一点用都没有，直接被krv卖头打死。</p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5728.png" /> </p>
<p>T100lt是隐蔽超好的眼车，却因为没有视野，被103b活活黑死。</p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5724.png" /> </p>
<p>907工程是铁头，被krv顶牛直接抽包抽死。</p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5727.png" /> </p>
<p>蟋蟀15会黑枪，却因为辣鸡的转向被krv绕死。</p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5729.png" /> </p>
<p>WZ111有三百穿，被103b穿侧面一发爆了弹药架。</p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5730.png" /> </p>
<p>FV215b183有183炮，103b和krv瑟瑟发抖，不敢打她，于是她解救了其他所有坦克。</p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5734.png" /> </p>
<p>但是自己的兄弟FV215b因为瑞典人的诱惑，决定叛变（因为183OO大），TK了183一发，然后183着火烧死了，结果所有坦克都被103b和krv降服了。</p>
<p>瑞典人把七个坦克还有鼠爷一起给serb，让serb做出两辆最强坦克加入瑞典阵营。serb用尽了他所有的脑洞，做出了两辆车E100WT和T-50-2</p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5731.png" /> </p>
<p><img alt="" src="https://cdn.luogu.com.cn/upload/pic/5732.png" /> </p>
<p>krv和103b看到之后蛤蛤大笑</p>
<p>krv：E100WT，10mm的脸，不被HE糊死才怪</p>
<p>103b：E100WT，灯塔般的隐蔽，不被黑死才怪</p>
<p>krv：T-50-2，这血量，我一炮就可以打死</p>
<p>103b：T-50-2，看是你机动好还是我黑枪准</p>
<p>serb：百运，胶水，让她们看看你们的厉害</p>
<h2 id="_2">题目描述</h2>
<p>故事还没讲完</p>
<p>krv骑坡卖头，却发现百运凭借优秀的精度炮炮打穿她的观察孔</p>
<p>krv慌了，跑去城市里面伸缩，被百运站桩撸死</p>
<p>strv103b跑去草后黑枪，看见胶水在肉侦，却发现自己根本打不中她，然后就被胶水点亮了，百运一梭子128的ARCR飞了过来</p>
<p>strv103b怂了，准备跑路了，但是还没等到自己切换回行走模式，胶水已经开始断她的腿了，被胶水断死</p>
<p>瑞典车们高呼不可战胜，从此不敢嚣张了</p>
<p>然后serb把百运和胶水加入了WOT</p>
<p>从此
其他坦克过上了更加水深火热的生活</p>
<p>然而你又不玩WOT，这事情不管你什么事啊</p>
<p>然而yql是大家的妹妹，所以这件事很重要：</p>
<p>yql在AK曼哈顿OI，CTSC，APIO之后，开始研究数学题。</p>
<p>由乃在挂了字符串OI，CTSC，APIO之后，开始研究大母神原型。</p>
<p>yql出了个数学题，由乃画出了一个表示大母神的图腾。</p>
<p>然后把这两个合成了一个题：</p>
<p>然而由于未知原因那个题挂掉了。。。</p>
<p>由乃想起来SCOI 2017 电子科技大学出了个卡常的rmq，然后发生了一件很有趣的事情</p>
<p>就是一位姓王的同学凭借奇奇怪怪的常数优化怒草了那个题，还比标程块了233倍</p>
<p>所以由乃也出了个卡常rmq，因为没题出了</p>
<h2 id="_3">输入格式</h2>
<p>给你一个随机数生成器</p>
<pre class="codehilite"><code class="language-cpp">namespace GenHelper
{
    unsigned z1,z2,z3,z4,b;
    unsigned rand_()
    {
    b=((z1&lt;&lt;6)^z1)&gt;&gt;13;
    z1=((z1&amp;4294967294U)&lt;&lt;18)^b;
    b=((z2&lt;&lt;2)^z2)&gt;&gt;27;
    z2=((z2&amp;4294967288U)&lt;&lt;2)^b;
    b=((z3&lt;&lt;13)^z3)&gt;&gt;21;
    z3=((z3&amp;4294967280U)&lt;&lt;7)^b;
    b=((z4&lt;&lt;3)^z4)&gt;&gt;12;
    z4=((z4&amp;4294967168U)&lt;&lt;13)^b;
    return (z1^z2^z3^z4);
    }
}
void srand(unsigned x)
{using namespace GenHelper;
z1=x; z2=(~x)^0x233333333U; z3=x^0x1234598766U; z4=(~x)+51;}
int read()
{
    using namespace GenHelper;
    int a=rand_()&amp;32767;
    int b=rand_()&amp;32767;
    return a*32768+b;
}
</code></pre>

<p>读入三个数 $n,m,s$</p>
<p>你需要 <code>srand(s)</code> 一下</p>
<p>然后 $n$ 个数表示 $a_i$，这个直接调用 <code>read</code> 函数</p>
<p>然后 $m$ 个询问，表示区间<strong>最大值</strong>，询问的区间是 $l = \text{read()} \bmod n + 1 , r = \text{read()} \bmod n + 1$，注意有可能 $l &gt; r$</p>
<h2 id="_4">输出格式</h2>
<p>输出一个 <code>unsigned long long</code> 表示每次询问的答案的和</p>
<h2 id="_5">输入输出样例</h2>
<h3 id="1">样例 #1</h3>
<h4 id="1_1">样例输入 #1</h4>
<pre class="codehilite"><code>233 233 233
</code></pre>

<h4 id="1_2">样例输出 #1</h4>
<pre class="codehilite"><code>243704637294
</code></pre>

<h2 id="_6">说明/提示</h2>
<table>
<thead>
<tr>
<th style="text-align: center;">测试点编号</th>
<th style="text-align: center;">$n,m =$</th>
<th style="text-align: center;">时限</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">$1 \sim 2$</td>
<td style="text-align: center;">$1000$</td>
<td style="text-align: center;">1s</td>
</tr>
<tr>
<td style="text-align: center;">$3$</td>
<td style="text-align: center;">$10^5$</td>
<td style="text-align: center;">1s</td>
</tr>
<tr>
<td style="text-align: center;">$4$</td>
<td style="text-align: center;">$5\times10^5$</td>
<td style="text-align: center;">1s</td>
</tr>
<tr>
<td style="text-align: center;">$5$</td>
<td style="text-align: center;">$10^6$</td>
<td style="text-align: center;">1s</td>
</tr>
<tr>
<td style="text-align: center;">$6$</td>
<td style="text-align: center;">$10^7$</td>
<td style="text-align: center;">5s</td>
</tr>
<tr>
<td style="text-align: center;">$7$</td>
<td style="text-align: center;">$1.2 \times 10^7$</td>
<td style="text-align: center;">5s</td>
</tr>
<tr>
<td style="text-align: center;">$8$</td>
<td style="text-align: center;">$1.5 \times 10^7$</td>
<td style="text-align: center;">5s</td>
</tr>
<tr>
<td style="text-align: center;">$9$</td>
<td style="text-align: center;">$2 \times 10^7$</td>
<td style="text-align: center;">5s</td>
</tr>
</tbody>
</table>
              
              <!-- Giscus评论系统 -->
              <div class="comments-section">
                <div class="comments-title">
                  💬 讨论交流
                </div>
                <script src="https://giscus.app/client.js"
                        data-repo="Eternity-Sky/luogu-problem-reader"
                        data-repo-id="R_kgDOPiP5uw"
                        data-category="Announcements"
                        data-category-id="DIC_kwDOPiP5u84CugHo"
                        data-mapping="url"
                        data-strict="0"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="bottom"
                        data-theme="preferred_color_scheme"
                        data-lang="zh-CN"
                        data-loading="lazy"
                        crossorigin="anonymous"
                        async>
                </script>
              </div>
            </article>
          </div>
        </div>
      </main>
      <footer class="md-footer">
        <div class="md-footer-meta md-typeset">
          <div class="md-footer-meta__inner md-grid">
            <div class="md-copyright">
              <div class="md-copyright__highlight">© 2025 洛谷题目浏览站</div>
              Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">Material for MkDocs</a>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      if (typeof hljs !== 'undefined') {
        hljs.highlightAll();
      }
    </script>
    <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
    <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, { 
          delimiters: [
            {"left":"$$","right":"$$","display":true},
            {"left":"$","right":"$","display":false},
            {"left":"\\(","right":"\\)","display":false},
            {"left":"\\[","right":"\\]","display":true}
          ],
          throwOnError: false,
          strict: false,
          trust: true
        });
      });
    </script>
  </body>
</html>