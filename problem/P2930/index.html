<!doctype html>
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="æ´›è°·é¢˜ç›®æµè§ˆç«™é¢˜ç›®è¯¦æƒ…">
    <meta name="author" content="CB_X2_Jun">
    <link rel="canonical" href="https://lglg.netlify.app/problem/P2930/">
    <link rel="icon" href="../../assets/images/favicon.png">
    <meta name="generator" content="mkdocs-material">
    <title>P2930 [USACO09HOL] Holiday Painting G</title>
    <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
    <style>
      :root { --md-text-font: "Roboto"; --md-code-font: "Roboto Mono" }
      
      /* ç¾åŒ–é¢˜ç›®é¡µé¢æ ·å¼ */
      .md-content__inner {
        max-width: 1000px;
        margin: 0 auto;
      }
      
      /* é¢˜ç›®æ ‡é¢˜ç¾åŒ– */
      .md-content__inner h1 {
        color: #2c3e50;
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 2rem;
        text-align: center;
        padding: 1rem 0;
        border-bottom: 3px solid #3498db;
      }
      
      /* é¢˜ç›®å†…å®¹åŒºå—ç¾åŒ– */
      .md-content__inner h2 {
        background: #f8f9fa;
        color: #2c3e50;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        border-left: 4px solid #3498db;
        margin: 2rem 0 1rem 0;
        font-size: 1.3rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        font-weight: 600;
      }
      
      /* ä»£ç å—ç¾åŒ– */
      .md-content__inner pre {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        margin: 1.5rem 0;
      }
      
      .md-content__inner pre code {
        background: transparent;
        color: #2c3e50;
        padding: 0;
        border-radius: 0;
        font-weight: 400;
      }
      
      .md-content__inner code {
        background: #e9ecef;
        color: #495057;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-weight: 500;
      }
      
      /* æ ·ä¾‹åŒºå—ç‰¹æ®Šç¾åŒ– */
      .md-content__inner h3:contains("æ ·ä¾‹") {
        background: #f0f8ff;
        color: #2c3e50;
        padding: 0.8rem 1.2rem;
        border-radius: 6px;
        border-left: 4px solid #17a2b8;
        margin: 1.5rem 0 0.8rem 0;
        font-size: 1.1rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        font-weight: 600;
      }
      
      /* æ™®é€šæ®µè½ç¾åŒ– */
      .md-content__inner p {
        line-height: 1.8;
        margin: 1rem 0;
        color: #444;
      }
      
      /* åˆ—è¡¨ç¾åŒ– */
      .md-content__inner ul, .md-content__inner ol {
        padding-left: 2rem;
        margin: 1rem 0;
      }
      
      .md-content__inner li {
        margin: 0.5rem 0;
        line-height: 1.6;
      }
      
      /* è¡¨æ ¼ç¾åŒ– */
      .md-content__inner table {
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        margin: 1.5rem 0;
      }
      
      .md-content__inner th {
        background: #e9ecef;
        color: #495057;
        font-weight: 600;
      }
      
      /* è¿”å›æŒ‰é’®ç¾åŒ– */
      .back-button {
        display: inline-block;
        background: #3498db;
        color: white;
        padding: 0.8rem 1.5rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        margin: 2rem 0;
        transition: background-color 0.3s;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      
      .back-button:hover {
        background: #2980b9;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        color: white;
        text-decoration: none;
      }
      
      /* Giscusè¯„è®ºåŒºåŸŸæ ·å¼ */
      .comments-section {
        margin: 3rem 0 2rem 0;
        padding: 2rem;
        background: #f8f9fa;
        border-radius: 12px;
        border: 1px solid #e9ecef;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      }
      
      .comments-title {
        color: #2c3e50;
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #3498db;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      
      /* è‡ªå®šä¹‰Giscusæ ·å¼ */
      .giscus {
        margin-top: 1rem;
      }
      
      .giscus-frame {
        border-radius: 8px;
        border: 1px solid #e9ecef;
      }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
  </head>
  <body dir="ltr">
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      <a href="#é¢˜ç›®å†…å®¹" class="md-skip">è·³è½¬è‡³</a>
    </div>
    <div data-md-component="announce"></div>
    
    <div id="__config" data-md-config="{&quot;base&quot;:&quot;../..&quot;,&quot;features&quot;:[],&quot;search&quot;:{&quot;worker&quot;:&quot;assets/javascripts/workers/search.b8dbb3d2.min.js&quot;}}"></div>
    
    <header class="md-header md-header--shadow" data-md-component="header">
      <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
        <a href="/" title="æ´›è°·é¢˜ç›®æµè§ˆç«™" class="md-header__button md-logo" aria-label="æ´›è°·é¢˜ç›®æµè§ˆç«™" data-md-component="logo">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
        </a>
        <label class="md-header__button md-icon" for="__drawer">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
        </label>
        <div class="md-header__title" data-md-component="header-title">
          <div class="md-header__ellipsis">
            <div class="md-header__topic">
              <span class="md-ellipsis">æ´›è°·é¢˜ç›®æµè§ˆç«™</span>
            </div>
            <div class="md-header__topic" data-md-component="header-topic">
              <span class="md-ellipsis">P2930 [USACO09HOL] Holiday Painting G</span>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <div class="md-container" data-md-component="container">
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          <!-- ä¾§è¾¹æ å¯¼èˆª -->
          <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" aria-label="å¯¼èˆªæ " data-md-level="0">
                  <label class="md-nav__title" for="__drawer">
                    <a href="/" title="æ´›è°·é¢˜ç›®æµè§ˆç«™" class="md-nav__button md-logo" aria-label="æ´›è°·é¢˜ç›®æµè§ˆç«™" data-md-component="logo">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
                    </a>
                    æ´›è°·é¢˜ç›®æµè§ˆç«™
                  </label>
                  <ul class="md-nav__list" data-md-scrollfix>
                    <li class="md-nav__item">
                      <a href="/" class="md-nav__link">
                        <span class="md-ellipsis">ğŸ  é¦–é¡µ</span>
                      </a>
                    </li>
                    <li class="md-nav__item">
                      <a href="/problem/list/" class="md-nav__link">
                        <span class="md-ellipsis">ğŸ“‹ é¢˜ç›®åˆ—è¡¨</span>
                      </a>
                    </li>
                    <li class="md-nav__item">
                      <a href="/about/" class="md-nav__link">
                        <span class="md-ellipsis">â„¹ï¸ å…³äº</span>
                      </a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              <h2 id="_1">é¢˜ç›®æè¿°</h2>
<p>To show their spirit for the holidays, the cows would like to paint a picture! Their picture will be represented as an R x C (1 &lt;= R &lt;= 50,000; 1 &lt;= C &lt;= 15) grid of unit squares, each of which is either 0 or 1. The grid rows are conveniently numbered 1..R; the columns are numbered 1..C.</p>
<p>Being pressed for time, the cows have asked their neighbors north of the border for help. Under the very helpful supervision of Canmuu the moose, they constructed a machine to throw paint at the picture in entire buckets! Beginning with all 0's in the picture grid, the machine splashes a certain paint color (either 0 or 1) over a</p>
<p>rectangle in the grid. In particular, Canmuu suggested that they perform Q (1 &lt;= Q &lt;= 10,000) operations; operation i consists of five integers R1_i, R2_i, C1_i, C2_i, and X_i (1 &lt;= R1_i &lt;= R2_i &lt;= R; 1 &lt;= C1_i &lt;= C2_i &lt;= C; 0 &lt;= X_i &lt;= 1), meaning that the cows will paint each unit square with a row index between R1_i and R2_i, inclusive, and a column index between C1_i and C2_i, inclusive, with color X_i.</p>
<p>However, painting a picture like this is quite prone to mistakes. So Canmuu has enlisted you to determine, after each operation, the number of unit squares in the grid which are the correct color.</p>
<p>MEMORY LIMIT: 64 MB</p>
<p>TIME LIMIT: 1.5 seconds</p>
<p>ä¸ºäº†è¡¨è¾¾å‡æ—¥çš„æ¿€æƒ…ï¼Œå¥¶ç‰›ä»¬è¦ç”»ä¸€å¹…å·¨å¤§çš„ç”»ã€‚</p>
<p>ç”»å¸ƒå¯ä»¥åˆ†æˆ$R\times C$ä¸ªæ–¹æ ¼ï¼Œä»ä¸Šåˆ°ä¸‹ç¼–ä¸º $1$ åˆ° $R$ è¡Œï¼Œä»å·¦åˆ°å³ç¼–ä¸º $1$ åˆ° $C$ åˆ—ã€‚ä½œç”»çš„é¢œè‰²æœ‰ä¸¤ç§ï¼Œç™½è‰²ï¼ˆç”¨ $0$ è¡¨ç¤ºï¼‰æˆ–è€…é»‘è‰²ï¼ˆç”¨ $1$ è¡¨ç¤ºï¼‰ã€‚</p>
<p>ç”±äºæ—¶é—´ç´§è¿«ï¼Œå¥¶ç‰›ä»¬ä¸å¾—ä¸è¯·æ•™åŒ—é¢çš„é‚»å±…ï¼Œå¡é—¨ã€‚å¡é—¨é€ç»™å®ƒä»¬ä¸€å°æœºå™¨ï¼Œä¸€æ¬¡æ“ä½œåªè¾“å…¥5ä¸ªå‚æ•° $R1_i,R2_i,C1_i,C2_i,X_i$ $(1 \le R1_i \le R2_i \le R;1 \le C1_i \le C2_i \le C;0 \le X_i \le 1)$ï¼ŒæŠŠ $R1_i$ è¡Œåˆ° $R2_i$ è¡Œï¼Œ$C1_i$ åˆ—åˆ° $C2_i$ åˆ—çš„ä¸€ä¸ªå¤§é•¿æ–¹å½¢æ¶‚æˆ $X_i$ è‰²ã€‚åœ¨æ‰€æœ‰æ“ä½œè¿˜æœªè¿›è¡Œçš„æ—¶å€™ï¼Œç”»å¸ƒæ˜¯ç™½è‰²çš„ã€‚</p>
<p>å¥¶ç‰›ä»¬ä¸€å…±è¦è¿›è¡Œ $Q$ æ¬¡æ“ä½œã€‚</p>
<p>å› ä¸ºè¿™æ ·çš„ç”»æ³•æ€»è¦å‡ºäº›å·®é”™ï¼Œæ‰€ä»¥å¥¶ç‰›ä»¬æƒ³è¯·ä½ ç®—ç®—ï¼Œæ¯ä¸€æ¬¡æ“ä½œè¿‡åï¼Œä¸€å…±æœ‰å¤šå°‘ä¸ªæ–¹æ ¼ä¸å®ƒä»¬çš„ç›®æ ‡ç”»é‡Œå¯¹åº”çš„æ–¹æ ¼æ˜¯åŒè‰²çš„ã€‚</p>
<h2 id="_2">è¾“å…¥æ ¼å¼</h2>
<p>* Line 1: Three space-separated integers: R, C, and Q</p>
<p>* Lines 2..R+1: Line i+1 contains C characters, each '0' or '1', denoting the i-th row of the grid in the obvious way.</p>
<p>* Lines R+2..R+Q+1: Line R+i+1 contains five space-separated integers representing a paint operation: R1_i, R2_i, C1_i, C2_i, and X_i</p>
<h2 id="_3">è¾“å‡ºæ ¼å¼</h2>
<p>* Lines 1..Q: On line i+1, print a single integer representing the number of matching unit squares after the i-th operation.</p>
<h2 id="_4">è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2>
<h3 id="1">æ ·ä¾‹ #1</h3>
<h4 id="1_1">æ ·ä¾‹è¾“å…¥ #1</h4>
<pre class="codehilite"><code>17 15 10 
111111101111111 
111111000111111 
111110000011111 
111100000001111 
111000000000111 
111100000001111 
111000000000111 
110000000000011 
111000000000111 
110000000000011 
100000000000001 
110000000000011 
100000000000001 
000000000000000 
111111000111111 
111111000111111 
111111000111111 
5 8 2 14 1 
8 17 3 7 1 
4 5 10 15 0 
7 16 12 14 1 
2 17 13 14 0 
2 6 2 3 1 
13 14 4 8 1 
3 6 6 7 1 
1 16 10 11 0 
7 16 10 10 0
</code></pre>

<h4 id="1_2">æ ·ä¾‹è¾“å‡º #1</h4>
<pre class="codehilite"><code>113 
94 
95 
91 
87 
93 
91 
87 
93 
93
</code></pre>

<h2 id="_5">è¯´æ˜/æç¤º</h2>
<p>The cows want to paint a picture of a holiday tree</p>
<p>After the first operation, the picture grid looks as follows:</p>
<p>000000000000000</p>
<p>000000000000000</p>
<p>000000000000000</p>
<p>000000000000000</p>
<p>011111111111110</p>
<p>011111111111110</p>
<p>011111111111110</p>
<p>011111111111110</p>
<p>000000000000000</p>
<p>000000000000000</p>
<p>000000000000000</p>
<p>000000000000000</p>
<p>000000000000000</p>
<p>000000000000000</p>
<p>000000000000000</p>
<p>000000000000000</p>
<p>000000000000000</p>
<p>There are 113 unit squares which match the corresponding square in the tree image; they are denoted below by an 'x' (the other bits are shown as they appear after the first paint splash):</p>
<p>0000000x0000000</p>
<p>000000xxx000000</p>
<p>00000xxxxx00000</p>
<p>0000xxxxxxx0000</p>
<p>0xx111111111xx0</p>
<p>0xxx1111111xxx0</p>
<p>0xx111111111xx0</p>
<p>0x11111111111x0</p>
<p>000xxxxxxxxx000</p>
<p>00xxxxxxxxxxx00</p>
<p>0xxxxxxxxxxxxx0</p>
<p>00xxxxxxxxxxx00</p>
<p>0xxxxxxxxxxxxx0</p>
<p>xxxxxxxxxxxxxxx</p>
<p>000000xxx000000</p>
<p>000000xxx000000</p>
<p>000000xxx000000</p>
              
              <!-- Giscusè¯„è®ºç³»ç»Ÿ -->
              <div class="comments-section">
                <div class="comments-title">
                  ğŸ’¬ è®¨è®ºäº¤æµ
                </div>
                <script src="https://giscus.app/client.js"
                        data-repo="Eternity-Sky/luogu-problem-reader"
                        data-repo-id="R_kgDOPiP5uw"
                        data-category="Announcements"
                        data-category-id="DIC_kwDOPiP5u84CugHo"
                        data-mapping="url"
                        data-strict="0"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="bottom"
                        data-theme="preferred_color_scheme"
                        data-lang="zh-CN"
                        data-loading="lazy"
                        crossorigin="anonymous"
                        async>
                </script>
              </div>
            </article>
          </div>
        </div>
      </main>
      <footer class="md-footer">
        <div class="md-footer-meta md-typeset">
          <div class="md-footer-meta__inner md-grid">
            <div class="md-copyright">
              <div class="md-copyright__highlight">Â© 2025 æ´›è°·é¢˜ç›®æµè§ˆç«™</div>
              Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">Material for MkDocs</a>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      if (typeof hljs !== 'undefined') {
        hljs.highlightAll();
      }
    </script>
    <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
    <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, { 
          delimiters: [
            {"left":"$$","right":"$$","display":true},
            {"left":"$","right":"$","display":false},
            {"left":"\\(","right":"\\)","display":false},
            {"left":"\\[","right":"\\]","display":true}
          ],
          throwOnError: false,
          strict: false,
          trust: true
        });
      });
    </script>
  </body>
</html>