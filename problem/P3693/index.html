<!doctype html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="LGOJ 题目浏览站 - 洛谷题目详情">
    <meta name="author" content="LGOJ Team">
    <link rel="canonical" href="https://lglg.netlify.app/problem/P3693/">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1336/1336494.png" type="image/png">
    <meta name="generator" content="LGOJ 题目浏览站">
    <title>P3693 P3693 琪露诺的冰雪小屋 - LGOJ 题目浏览站</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      :root {
        --primary-color: #2563eb;
        --primary-dark: #1d4ed8;
        --secondary-color: #10b981;
        --accent-color: #8b5cf6;
        --danger-color: #ef4444;
        --warning-color: #f59e0b;
        --dark-color: #1f2937;
        --light-color: #f9fafb;
        --gray-50: #f9fafb;
        --gray-100: #f3f4f6;
        --gray-200: #e5e7eb;
        --gray-300: #d1d5db;
        --gray-400: #9ca3af;
        --gray-500: #6b7280;
        --gray-600: #4b5563;
        --gray-700: #374151;
        --gray-800: #1f2937;
        --gray-900: #111827;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        --transition: all 0.2s ease-in-out;
      }
      { --md-text-font: "Roboto"; --md-code-font: "Roboto Mono" }
      
      /* LGOJ 题目页面样式 */
      body {
        font-family: 'Inter', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        background-color: #fff;
        color: var(--gray-900);
        line-height: 1.6;
        margin: 0;
        padding: 0;
      }
      
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }
      
      /* 页面头部 */
      .lgoj-header {
        background: white;
        border-bottom: 1px solid var(--gray-200);
        padding: 1rem 0;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: var(--shadow-sm);
      }
      
      .lgoj-header .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .lgoj-header .logo {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-color);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      
      .lgoj-header .logo:hover {
        color: var(--primary-dark);
      }
      
      .lgoj-header nav {
        display: flex;
        gap: 2rem;
      }
      
      .lgoj-header nav a {
        color: var(--gray-700);
        text-decoration: none;
        font-weight: 500;
        transition: var(--transition);
      }
      
      .lgoj-header nav a:hover {
        color: var(--primary-color);
      }
      
      /* 主要内容区域 */
      .main-content {
        min-height: calc(100vh - 200px);
        padding: 2rem 0;
      }
      
      .problem-content {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: var(--shadow);
      }
      
      /* 页脚 */
      .lgoj-footer {
        background: var(--gray-50);
        border-top: 1px solid var(--gray-200);
        padding: 2rem 0;
        text-align: center;
        color: var(--gray-600);
      }
      
      /* 题目标题美化 */
      .md-content__inner h1 {
        color: var(--gray-900);
        font-size: 2.5rem;
        font-weight: 800;
        margin-bottom: 2rem;
        text-align: center;
        padding: 2rem 0 1rem 0;
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        border-bottom: 2px solid var(--gray-200);
      }
      
      /* 题目内容区块美化 */
      .md-content__inner h2 {
        background: var(--gray-50);
        color: var(--gray-900);
        padding: 1rem 1.5rem;
        border-radius: 8px;
        border-left: 4px solid var(--primary-color);
        margin: 2rem 0 1rem 0;
        font-size: 1.3rem;
        box-shadow: var(--shadow);
        font-weight: 600;
      }
      
      /* 代码块美化 */
      .md-content__inner pre {
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: var(--shadow);
        margin: 1.5rem 0;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      .md-content__inner pre code {
        background: transparent;
        color: var(--gray-800);
        padding: 0;
        border-radius: 0;
        font-weight: 400;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      .md-content__inner code {
        background: var(--gray-100);
        color: var(--gray-800);
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-weight: 500;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      /* 样例区块特殊美化 */
      .md-content__inner h3 {
        background: linear-gradient(135deg, var(--secondary-color), #059669);
        color: white;
        padding: 0.8rem 1.2rem;
        border-radius: 6px;
        margin: 1.5rem 0 0.8rem 0;
        font-size: 1.1rem;
        box-shadow: var(--shadow);
        font-weight: 600;
      }
      
      /* 普通段落美化 */
      .md-content__inner p {
        line-height: 1.8;
        margin: 1rem 0;
        color: var(--gray-700);
        font-size: 1rem;
      }
      
      /* 主要内容容器 - 确保不超出页面边界 */
      .md-content__inner {
        max-width: 100%;
        width: 100%;
        box-sizing: border-box;
        overflow-x: hidden;
        padding: 0 1rem;
      }
      

      
      /* 防止图片过大影响布局 */
      .md-content__inner img[src*="latex"] {
        display: inline;
        margin: 0;
        box-shadow: none;
        border-radius: 0;
        vertical-align: middle;
      }
      
      /* 列表美化 */
      .md-content__inner ul, .md-content__inner ol {
        padding-left: 2rem;
        margin: 1rem 0;
      }
      
      .md-content__inner li {
        margin: 0.5rem 0;
        line-height: 1.7;
        color: var(--gray-600);
      }
      
      /* 表格美化 */
      .md-content__inner table {
        width: 100%;
        border-collapse: collapse;
        margin: 1.5rem 0;
        box-shadow: var(--shadow);
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid var(--gray-200);
      }
      
      .md-content__inner th {
        background: var(--primary-color);
        color: white;
        padding: 1rem;
        text-align: left;
        font-weight: 600;
      }
      
      .md-content__inner td {
        padding: 0.8rem 1rem;
        border-bottom: 1px solid var(--gray-200);
      }
      
      .md-content__inner tr:nth-child(even) {
        background: var(--gray-50);
      }
      
      /* 强调文本美化 */
      .md-content__inner strong {
        color: var(--gray-900);
        font-weight: 600;
      }
      
      .md-content__inner em {
        color: var(--gray-600);
        font-style: italic;
      }
      
      /* 链接美化 */
      .md-content__inner a {
        color: var(--primary-color);
        text-decoration: none;
        border-bottom: 1px solid transparent;
        transition: var(--transition);
      }
      
      .md-content__inner a:hover {
        color: var(--primary-dark);
        border-bottom-color: var(--primary-dark);
      }
      
      /* 引用块美化 */
      .md-content__inner blockquote {
        border-left: 4px solid var(--warning-color);
        background: #fefbf3;
        padding: 1rem 1.5rem;
        margin: 1.5rem 0;
        border-radius: 0 8px 8px 0;
        color: var(--gray-700);
        font-style: italic;
      }
      
      /* 水平分割线美化 */
      .md-content__inner hr {
        border: none;
        height: 2px;
        background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        margin: 2rem 0;
      }
      
      /* 导航栏品牌更新 */
      .md-header__title .md-header__ellipsis .md-ellipsis {
        color: var(--primary-color);
        font-weight: 700;
      }
      
      /* 返回首页按钮 */
      .return-home-btn {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: 500;
        box-shadow: var(--shadow-lg);
        transition: var(--transition);
        z-index: 1000;
      }
      
      .return-home-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        color: white;
        text-decoration: none;
      }
      
      /* 响应式设计 */
      @media (max-width: 768px) {
        .md-content__inner {
          padding: 1rem;
        }
        
        .md-content__inner h1 {
          font-size: 2rem;
        }
        
        .md-content__inner h2 {
          font-size: 1.2rem;
          padding: 0.8rem 1rem;
        }
        
        .md-content__inner pre {
          padding: 1rem;
          font-size: 0.9rem;
        }
        
        .lgoj-home-btn {
          position: static;
          margin: 1rem 0;
          width: 100%;
          justify-content: center;
        }
      }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
  </head>
  <body>
    <!-- 简洁的页面头部 -->
    <header class="lgoj-header">
      <div class="container">
        <a href="/" class="logo">
          <i class="fas fa-book"></i>
          LGOJ 题目浏览站
        </a>
        <nav>
          <a href="/">首页</a>
          <a href="/problem/list">题库</a>
          <a href="/about">关于</a>
        </nav>
      </div>
    </header>

    <!-- 主要内容区域 -->
    <main class="main-content">
      <div class="container">
        <div class="problem-content">
          <h2 id="_1">题目背景</h2>
<p>琪露诺有一片正方形的雪地，她想在上面盖一栋小冰屋。</p>
<h2 id="_2">题目描述</h2>
<p>琪露诺偶然间得到了一片 $N\times N$ 大小的正方形的雪地，她想在上面盖一栋冰雪小屋。</p>
<p>但调皮的⑨才不会认真地收集冰块呢，她要在这片土地上使用冰雪弹幕来制造冰砖，然后一块一块地搭起一个房子。</p>
<p>琪露诺制造冰砖的方式是这样的：她会站在某个方格上，然后向上，下，左，右，左上，左下，右上，右下这八个方向之一发射强力的冰雪弹幕，弹幕能影响到该方向一条直线上一定的距离以内的所有方格。</p>
<p>地面的每个方格都有一个冷冻度，初始为 $0$。被冰雪弹幕影响一次，冷冻度 $+1$，冷冻度的上限为 $4$。</p>
<p>在发射弹幕的间隙中，琪露诺会来到所有冷冻度为 $4$ 的格子，把那里的雪堆到一起，制作一个冰砖（大小为 $1\times1\times1$ 方格），并且将冷冻度重新归零。</p>
<p>琪露诺会拿着这些冰砖来盖房子。这个房子的长度、宽度和坐落位置她在一开始就已经规划好了，但她并不愿意提早确定房子的高度。</p>
<p>琪露诺是这样计划的：这个房子外观上看起来是一个长方体。</p>
<p>她会先盖起这个房子的四面墙（厚度为 $1$ 个方格），并在贴近地面的位置（废话）留一个宽度和高度分别为 $1$ 和 $2$ 的空位不放冰砖，作为房门。（显然，门无法开在墙的拐角处，但可以紧贴拐角）。</p>
<p>在她喜欢的时候，她会结束四面墙的建造，并一次性在墙顶部盖上一个厚度为 $1$ 方格的屋顶，使房子成为一个空心有顶的长方体。</p>
<p>计划已经非常充分了，但琪露诺还是不放心，所以她想请你帮她写一个程序，来随时提醒着她别出什么差错。这个程序需要具备的功能将在下文详细介绍。</p>
<hr />
<p>雪地由 $N$ 行 $N$ 列，$N\times N$ 个方格组成。（下标从 $0$ 开始，也就是说，存在第 $0$ 行第 $0$ 列，但不存在第 $N$ 行第 $N$ 列）每个方格都有一个冷冻度,范围 $[0,4]$，初始为 $0$。注意，空间是三维的，而冷冻度只是地面的属性。</p>
<p>琪露诺想将房子的左上角放在第 $H_R$行，$H_C$ 列（外墙也是房子的一部分，因此左上角位置不应该是房子的内部,而是外墙,并且是墙的拐角）。</p>
<p>这个房子的长度（平行于每列）是 $H_X$，宽度（平行于每行）是 $H_Y$，包含墙。保证房子所占空间不会超出雪地的范围。</p>
<p>除了最后搭建屋顶，琪露诺只会在高度 $[0,H_M-1]$ 放置冰砖。</p>
<p>一开始，琪露诺一个冰砖也没有。
在以下的介绍中，我们用俯视图来作示意：</p>
<div class="codehilite"><pre><span></span><code><span class="mf">0000</span>
<span class="mf">0000</span>
<span class="mf">4</span><span class="n">x90</span>
<span class="mf">0</span><span class="n">x01</span>
</code></pre></div>

<p>数字代表当前该格子的冷冻度。如果位置紧贴地面（高度为 $0$）的地方放上了冰砖，那么用字母 $x$ 表示。</p>
<p>如果紧贴地面的位置没有冰砖，但是位置正上方的高空存在冰砖，那么仍然用数字表示地面的冷冻度，但这个数字会增加 $5$。即如果在示意图中看到了一个数字 $t\ge5$，表示该位置地面是空的，但高处有冰砖，且地面的冷冻度为 $t-5$。</p>
<h2 id="ice_barrage-r-c-d-s">第一个操作：<code>ICE_BARRAGE R C D S</code></h2>
<p>表示琪露诺站在第 $R$ 行 $C$ 列的位置，朝着方向 $D$ 发射了一个强度为 $S$ 的弹幕。<br />
$R,C,D,S\in\mathbf{Z},0\le D\le7,0\le R,C,S&lt;N$。<br />
方向编号 $0$ 表示上 $(R-1,C)$，$1$ 表示左上 $(R-1,C-1)$， <br />
$2$ 表示左 $(R,C-1)$，$3$ 表示左下 $(R+1,C-1)$，<br />
$4$ 表示下 $(R+1,C)$，$5$ 表示右下 $(R+1,C+1)$，<br />
$6$ 表示右 $(R,C+1)$，$7$ 表示右上 $(R-1,C+1)$。<br />
强度为 $S$ 的弹幕，可以使“处在发射方向直线上，距离琪露诺不超过 $S$ 格的所有格子（包括她站的格子）”的冷冻度都 $+1$。有以下几种特殊情况：</p>
<ol>
<li>如果某个格子冷冻度为 $4$，那么该格子冷冻度不变。</li>
<li>如果弹幕所经路途上，有一个位置的地面上（高度为 $0$）已经放了冰砖（就是弹幕撞上了琪露诺已经盖了一半的房子），那么弹幕将被阻挡，无法影响到冰砖所在的格子以及冰砖后面被挡住的格子。</li>
<li>弹幕超出雪地的部分忽略不计。</li>
</ol>
<p>对于这个操作，需要如下输出一行：<code>CIRNO FREEZED k BLOCK(S)</code><br />
如果这个弹幕将某个方格的冷冻度成功增加了 $1$，那么认为这个弹幕冻住了该方格。</p>
<p><code>k</code> 表示这个弹幕总共冻住了多少方格。</p>
<p>如图：发射弹幕前地图如下：</p>
<div class="codehilite"><pre><span></span><code><span class="mf">00000</span>
<span class="mf">00000</span>
<span class="mf">00000</span>
<span class="mf">000</span><span class="n">x0</span>
<span class="mf">00000</span>
</code></pre></div>

<p>执行操作 <code>ICE_BARRAGE 1 1 5 4</code>，地图变为：</p>
<div class="codehilite"><pre><span></span><code><span class="mf">00000</span>
<span class="mf">01000</span>
<span class="mf">00100</span>
<span class="mf">000</span><span class="n">x0</span>
<span class="mf">00000</span>
</code></pre></div>

<p>输出：<code>CIRNO FREEZED 2 BLOCK(S)</code><br />
解释：琪露诺站在第一行第一列，面对右下角发射了一个强度为 $4$ 的弹幕，但弹幕被 <code>x</code> 所阻挡，只能影响到 <code>x</code> 之前的格子。</p>
<h2 id="make_ice_block">第二个操作：<code>MAKE_ICE_BLOCK</code></h2>
<p>琪露诺走遍地图上所有冷冻度为 $4$ 的方格，每个方格可以收集一个冰砖，然后将它们的冷冻度归零。 </p>
<p>对于这个操作，你需要给出如下输出一行：<code>CIRNO MADE x ICE BLOCK(S),NOW SHE HAS y ICE BLOCK(S)</code><br />
表示琪露诺制造了 $x$ 个冰砖，目前她有 $y$ 个冰砖。<br />
比如琪露诺一开始有 $0$ 个冰砖，并且状态如下：</p>
<div class="codehilite"><pre><span></span><code><span class="mf">0</span><span class="n">xxx</span>
<span class="mf">0</span><span class="n">x4x</span>
<span class="mf">0</span><span class="n">x9x</span>
<span class="mf">0400</span>
</code></pre></div>

<p>执行操作 <code>MAKE_ICE_BLOCK</code> 后变为</p>
<div class="codehilite"><pre><span></span><code><span class="mf">0</span><span class="n">xxx</span>
<span class="mf">0</span><span class="n">x0x</span>
<span class="mf">0</span><span class="n">x5x</span>
<span class="mf">0000</span>
</code></pre></div>

<p>输出：<code>CIRNO MADE 3 ICE BLOCK(S),NOW SHE HAS 3 ICE BLOCK(S)</code><br />
在这个示例中，房子已经完成了一部分，<code>x</code> 表示墙，<code>9</code> 这个位置地面没有冰砖，但高处有（可以猜出是门）。房间内唯一一块空地、门的位置，以及房间外的一个位置的冷冻度都达到了 $4$，因此可以收集到 $3$ 块冰砖，收集后将三个位置冷冻度都归零。</p>
<h2 id="put_ice_block-r-c-h">第三个操作：<code>PUT_ICE_BLOCK R C H</code></h2>
<p>表示在第 $R$ 行，第 $C$ 列，高度为 $H$ 的地方放一个冰砖。$0\le R,C&lt;N,0\le H&lt;H_M$。</p>
<p>贴近地面的位置高度为 $0$。如果冰砖放置成功，那么琪露诺库存的冰砖数量将减 $1$。</p>
<p>如果放置的位置贴近地面，该位置冷冻度立即归 $0$。</p>
<p>有以下几种情况，序号越小优先级越高，并且只能满足一种情况。</p>
<p>如果满足 $1$ 的话就忽视后面的，不满足 $1$ 的前提下才可能满足 $2\cdots\cdots$ 以此类推。</p>
<ol>
<li>琪露诺目前没有任何冰砖，无法放置。这种情况下你需要输出：<code>CIRNO HAS NO ICE_BLOCK</code></li>
<li>冰砖将放在半空中，无法依附其他任何冰砖，或者目标位置已有冰砖了。<br />
这种情况下你需要输出一行：<code>BAKA CIRNO,CAN'T PUT HERE</code>，并无视此次操作，不做任何工作。</li>
<li>冰砖放在了规划建造房子的区域之外，即
$R<H_R$ 或 $R>H_R+H_x-1$<br />
或 $C<H_C$ 或 $C>H_C+H_Y-1$。请输出一行：<code>CIRNO MISSED THE PLACE</code><br />
尽管琪露诺放错了地方，但你并不能阻止她放置这个冰砖。  </li>
<li>冰砖留在了房子的内部，本应留空的地方被占用了，即<br />
$H_R+1\le R\le H_R+H_X-2$ 且 $H_C+1\le C\le H_C+H_Y-2$<br />
在屋顶的高度固定下来前，我们将所有满足上式的情况都认为是放在了房屋内部。<br />
请输出一行：<code>CIRNO PUT AN ICE_BLOCK INSIDE THE HOUSE</code><br />
尽管琪露诺放错了地方，但你并不能阻止她放置这个冰砖。</li>
<li>冰砖放在了正确的位置（不必考虑是否堵住了留给门的地方）<br />
请输出一行：<code>CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS x ICE_BLOCK(S)</code><br />
<code>x</code> 表示放过这块冰砖后琪露诺剩余的冰砖。</li>
</ol>
<h2 id="remove_ice_block-r-c-h">第四个操作：<code>REMOVE_ICE_BLOCK R C H</code></h2>
<p>表示取走第 $R$ 行，第 $C$ 列，高度为 $H$ 处的冰砖。<br />
有以下几种情况，序号越小优先级越高，并且只能满足一种情况。</p>
<p>如果满足 $1$ 的话就忽视后面的，不满足 $1$ 的前提下才可能满足 $2\cdots\cdots$ 以此类推。</p>
<ol>
<li>目标位置没有冰砖，输出一行：<code>BAKA CIRNO,THERE IS NO ICE_BLOCK</code></li>
<li>目标位置有冰砖，并且在这个冰砖被移走后，至少有一个冰砖形成了一个悬空的块。<br />
如下面的“侧视图”，<code>x</code> 表示冰砖，<code>0</code> 表示空位。</li>
</ol>
<div class="codehilite"><pre><span></span><code>xxxx
x000
x000
x000
</code></pre></div>

<p>$\ \ $在移走左上角的冰砖后，第一行右边三个冰砖没有了依靠，形成了一个悬空的连通块，就属于这种情况。<br />
$\ \ $这个冰砖将成功移走，琪露诺的冰砖库存将会 $+1$。并且所有的悬空连通块都会掉下来摔碎并消失<br />
$\ \ $（既不会进入冰砖库存，也不会在地面上留有任何痕迹）。<br />
$\ \ $输出一行：<code>CIRNO REMOVED AN ICE_BLOCK,AND k BLOCK(S) ARE BROKEN</code>，<code>k</code> 表示摔碎的冰砖数量。<br />
3. 琪露诺挪走了冰砖，并且其他冰砖不受任何影响。  <br />
$\ \ \ $琪露诺的冰砖库存 $+1$，输出一行：<code>CIRNO REMOVED AN ICE_BLOCK</code></p>
<h2 id="make_roof">第五个操作：<code>MAKE_ROOF</code></h2>
<p>这个操作只会出现一次，并且只会作为最后一个操作。<br />
这个操作表明琪露诺已经完成了冰雪小屋的四墙，只剩屋顶了！  </p>
<p>一般情况下，琪露诺将放置最后的 $H_X\times H_Y$ 个冰砖，把它们放置在墙壁最高的高度 $+1$ 的那一层，<br />
形成一个屋顶。然后她移除所有多余的冰砖，接下来补好所有残缺的墙壁。</p>
<p>你需要按顺序来执行整个过程，一旦遇到某种用 $\bullet$ 标识的特殊情况，则执行完该情况后退出流程。</p>
<p>在特殊情况之间所描述的均为一般情况，只要之前没有因为满足某种特殊情况而退出流程，均认为满足了一般情况。</p>
<p>首先，琪露诺将会一次性放置最多 $H_X\times H_Y$ 个冰砖来建造屋顶。</p>
<p>为什么是最多呢？请注意一点：如果之前错误放置在房子内部的冰砖恰好充当了屋顶的一部分，那么就不用在这个位置再放冰砖了。并且，所有比屋顶高的冰砖在之后将视为错误放置在了房子外部。</p>
<p>注意，放屋顶的时候可能会触及到高度为 $H_M$ 的那个平面。</p>
<p>建造屋顶前后将会碰到两种特殊情况：
- 琪露诺剩余的冰砖不足以建造屋顶。输出一行：<code>SORRY CIRNO,NOT ENOUGH ICE_BLOCK(S) TO MAKE ROOF</code>
- 墙壁的最高高度小于 $2$ 个方格，或者内部有效空间小于两个方格。<br />
墙壁所在的一圈不算内部空间。计算内部有效空间时请忽视错误放置的冰砖，因为它们将来要被移除。<br />
输出一行：<code>SORRY CIRNO,HOUSE IS TOO SMALL</code></p>
<p>（特殊情况结束）</p>
<p>此后，我们认为琪露诺已经造好了屋顶，接下来该移除所有多余冰砖了。在移除过程中，琪露诺会尽可能让更少的冰砖摔碎。如果墙壁上某个冰砖因为移走了多余的冰砖而将要摔碎，那么她会先拆掉墙壁上的那个冰砖，然后在填补墙壁残缺时重新补回来（显然，这种行为不会影响到墙壁有无残缺的定性，但可以少损失一个冰砖）。她不会故意拆掉一个处在墙壁上且不会摔碎的冰砖。<br />
输出两行：<br />
<code>K1 ICE_BLOCK(S) INSIDE THE HOUSE NEED TO BE REMOVED</code><br />
<code>K2 ICE_BLOCK(S) OUTSIDE THE HOUSE NEED TO BE REMOVED</code><br />
<code>K1</code>表示房子内部错误放置的冰砖数量，<code>K2</code>表示房子外部错误放置的冰砖数量。</p>
<p>将有可能遭遇一种特殊情况：
- 琪露诺移除了所有多余的冰砖，但在移除过程中，屋顶塌陷了。<br />
输出一行：<code>SORRY CIRNO,HOUSE IS BROKEN WHEN REMOVING BLOCKS</code></p>
<p>（特殊情况结束）</p>
<p>此后，我们认为琪露诺已经移除了所有多余的冰砖，接下来该填补墙壁的残缺了。</p>
<p>墙壁有残缺的定义是：除了宽为 $1$，高为 $2$ 的门以外，
在房子内部看外面还能看到其他缺口。</p>
<p>如果某个空位将来要作为门的一部分，则不属于残缺。并且房子只能有一个门。</p>
<p>如果墙壁没有残缺，则不要填补，否则需要填补。你需要记下墙壁是否有残缺，之后会用到。</p>
<p>填补的策略是：使用尽可能少的冰砖，在正确的位置填补墙壁，使房屋的状态不满足墙壁有残缺的定义（即不能放置多余的冰砖，通过遮挡视线来达到目的）。在此定义下，<strong>大多数</strong>情况我们无需考虑四角的柱子是否完整，因为在房间里看不到。</p>
<p>将有可能遭遇一种特殊情况：
- 琪露诺剩余的冰砖不足以填补墙壁的残缺。<br />
输出一行：<code>SORRY CIRNO,NOT ENOUGH ICE_BLOCKS TO FIX THE WALL</code></p>
<p>（特殊情况结束）</p>
<p>此后，我们认为房子被成功建成了，这时你需要输出几行内容来对房子进行评价。</p>
<p>首先输出这么一行来庆祝房子的建成：<code>GOOD JOB CIRNO,SUCCESSFULLY BUILT THE HOUSE</code><br />
1. 在贴近地面的位置找不到一个宽度为 $1$，高度为 $2$ 的位置留给门。<br />
    输出一行：<code>HOUSE HAS NO DOOR</code>，然后琪露诺会尽可能利用墙壁上的残缺来开一个门。<br />
    否则，输出一行：<code>DOOR IS OK</code>
2. 接下来输出一行表示填补之前墙壁的完整程度<br />
    2.1. 在之前的记录中，墙壁不完整而需要修补。输出：<code>WALL NEED TO BE FIXED</code><br />
    2.2. 在之前的记录中，墙壁完整而无需修补。输出：<code>WALL IS OK</code><br />
3. 接下来一行表示四角的完整程度。<br />
    如果四个角的柱子有不完整的地方，就输出：<code>CORNER NEED TO BE FIXED</code><br />
    在这种情况下，如果琪露诺剩余的冰砖足够修复拐角的空缺，那么她直接会修复这个空缺。<br />
    如果不够的话，她会再多收集几个冰砖，数量恰好修复这个空缺，然后修复这个空缺。<br />
    否则，输出：<code>CORNER IS OK</code></p>
<p>接下来，输出一行：<code>CIRNO FINALLY HAS k ICE_BLOCK(S)</code><br />
<code>k</code> 表示琪露诺最后剩余的冰砖的数量。</p>
<p>最后，如果在之前的记录中，墙壁完整无缺，没有一个位置需要填补。房子内外都无任何多余的方块，没有一个位置需要移除。没有出现房子没门的情况，房子四角的柱子也在造屋顶前完全造好，而不是通过修补完善的。并且门恰好开在了某面墙的正中央（如果长度为偶数，中间的两个都算），输出一行： <br />
<code>CIRNO IS PERFECT!</code></p>
<h2 id="_3">输入格式</h2>
<p>第一行一个正整数 $N$，表示雪地的大小。</p>
<p>第二行一个正整数$H_M$，表示琪露诺放置方块的最大高度。</p>
<p>第三行四个正整数 $H_R,H_C,H_X,H_Y$，表示房子左上角位置的行列坐标，房子的长度以及宽度。</p>
<p>第四行一个正整数 $M$，表示操作的数量。</p>
<p>接下来 $M$ 行，每行表示一个操作，输入格式见题目描述。</p>
<h2 id="_4">输出格式</h2>
<p>在题目描述中已经介绍。</p>
<h2 id="_5">输入输出样例</h2>
<h3 id="1">样例 #1</h3>
<h4 id="1_1">样例输入 #1</h4>
<div class="codehilite"><pre><span></span><code><span class="mf">8</span>
<span class="mf">10</span>
<span class="mf">4</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="mf">4</span>
<span class="mf">63</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">3</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">1</span>
<span class="n">MAKE_ICE_BLOCK</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="mf">0</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">MAKE_ICE_BLOCK</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">1</span>
<span class="c1">REMOVE_ICE_BLOCK 4 0 1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="mf">0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">7</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">0</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">MAKE_ICE_BLOCK</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">MAKE_ICE_BLOCK</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">MAKE_ICE_BLOCK</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">ICE_BARRAGE</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">7</span>
<span class="n">MAKE_ICE_BLOCK</span>
<span class="c1">REMOVE_ICE_BLOCK 6 1 0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">7</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">7</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">7</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="mf">0</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">7</span><span class="w"> </span><span class="mf">0</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">7</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">7</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">7</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">6</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="mf">3</span><span class="w"> </span><span class="mf">1</span>
<span class="n">PUT_ICE_BLOCK</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span><span class="mf">1</span>
<span class="n">MAKE_ROOF</span>
</code></pre></div>

<h4 id="1_2">样例输出 #1</h4>
<div class="codehilite"><pre><span></span><code><span class="n">CIRNO</span><span class="w"> </span><span class="n">FREEZED</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="n">FREEZED</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="n">MADE</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">ICE</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">),</span><span class="n">NOW</span><span class="w"> </span><span class="n">SHE</span><span class="w"> </span><span class="k">HAS</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">ICE</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="k">HAS</span><span class="w"> </span><span class="k">NO</span><span class="w"> </span><span class="n">ICE_BLOCK</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="n">FREEZED</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="n">FREEZED</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="n">FREEZED</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="n">FREEZED</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="n">FREEZED</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="n">FREEZED</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="n">FREEZED</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="n">FREEZED</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">CIRNO</span><span class="w"> </span><span class="n">MADE</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">ICE</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">),</span><span class="n">NOW</span><span class="w"> </span><span class="n">SHE</span><span class="w"> </span><span class="k">HAS</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="n">ICE</span><span class="w"> </span><span class="n">BLOCK</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
<span class="n">BAKA</span><span class="w"> </span><span class="n">CIRNO</span><span class="p">,</span><span class="n">CAN</span><span class="s1">&#39;T PUT HERE</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 7 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 6 ICE_BLOCK(S)</span>
<span class="s1">CIRNO MISSED THE PLACE</span>
<span class="s1">CIRNO REMOVED AN ICE_BLOCK,AND 1 BLOCK(S) ARE BROKEN</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 5 ICE_BLOCK(S)</span>
<span class="s1">CIRNO PUT AN ICE_BLOCK INSIDE THE HOUSE</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 3 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 2 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 1 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 0 ICE_BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 6 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 7 BLOCK(S)</span>
<span class="s1">CIRNO MADE 8 ICE BLOCK(S),NOW SHE HAS 8 ICE BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO MADE 8 ICE BLOCK(S),NOW SHE HAS 16 ICE BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO MADE 8 ICE BLOCK(S),NOW SHE HAS 24 ICE BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO FREEZED 8 BLOCK(S)</span>
<span class="s1">CIRNO MADE 8 ICE BLOCK(S),NOW SHE HAS 32 ICE BLOCK(S)</span>
<span class="s1">CIRNO REMOVED AN ICE_BLOCK</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 32 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 31 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 30 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 29 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 28 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 27 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 26 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 25 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 24 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 23 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 22 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 21 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 20 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 19 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 18 ICE_BLOCK(S)</span>
<span class="s1">CIRNO SUCCESSFULLY PUT AN ICE_BLOCK,NOW SHE HAS 17 ICE_BLOCK(S)</span>
<span class="s1">0 ICE_BLOCK(S) INSIDE THE HOUSE NEED TO BE REMOVED</span>
<span class="s1">0 ICE_BLOCK(S) OUTSIDE THE HOUSE NEED TO BE REMOVED</span>
<span class="s1">GOOD JOB CIRNO,SUCCESSFULLY BUILT THE HOUSE</span>
<span class="s1">DOOR IS OK</span>
<span class="s1">WALL IS OK</span>
<span class="s1">CORNER IS OK</span>
<span class="s1">CIRNO FINALLY HAS 1 ICE_BLOCK(S)</span>
<span class="s1">CIRNO IS PERFECT!</span>
</code></pre></div>

<h2 id="_6">说明/提示</h2>
<p>共分为 $6$ 个 <strong>Subtask</strong>，每个 <strong>Subtask</strong> 的数据都满足一定条件，并且同时满足序号更大的 <strong>Subtask</strong> 的条件。<br />
如 <strong>Subtask #0</strong> 同时满足 <strong>Subtask #0~5</strong> 的条件。<br />
每一个 <strong>Subtask</strong> 的得分取所有测试点的最低分。</p>
<p><strong>Subtask #0</strong> $20\%$<br />
琪露诺只想玩玩冰雪弹幕，她不会放置任何冰砖，也不会盖房子(即只有操作一和操作二)。  </p>
<p><strong>Subtask #1</strong> $10\%$<br />
琪露诺不会移除已经放置的冰砖。</p>
<p><strong>Subtask #2</strong> $20\%$<br />
琪露诺很有信心，她将在没有 <code>MAKE_ROOF</code> 的情况下建造她的冰屋(这种情况下，放置方块的高度仍然会小于 $H_M$ 且没有 <code>MAKE_ROOF</code> 操作)。</p>
<p><strong>Subtask #3</strong> $20\%$<br />
琪露诺在移除方块时会谨慎考虑,不会造成任何冰砖摔落。<code>MAKE_ROOF</code> 操作移除多余冰砖时，也不会造成屋顶塌陷。</p>
<p><strong>Subtask #4</strong> $20\%$<br />
琪露诺不喜欢把门开到四角的柱子旁边(数据保证在所有可能作为门的墙壁空缺中，有一种可能使得门不紧贴四角的柱子)。 </p>
<p><strong>Subtask #5</strong> $10\%$<br />
$4\le N\le 16$，$5\le H_M\le 20$，$10\le M\le 10^3$，保证不属于冰屋范围内的所有空地至多构成一个连通块。</p>
<p>注意：判断墙壁是否有残缺时，候选的开门位如果被方块堵住，在当时还未被清空。"能看到残缺"以当时的情况作为判断依据。</p>
        </div>
        
        <!-- 评论区域 -->
        <div class="comments-section">
          <div class="comments-title">
            💬 讨论交流
          </div>
          <script src="https://giscus.app/client.js"
                  data-repo="Eternity-Sky/luogu-problem-reader"
                  data-repo-id="R_kgDOPiP5uw"
                  data-category="Announcements"
                  data-category-id="DIC_kwDOPiP5u84CugHo"
                  data-mapping="url"
                  data-strict="0"
                  data-reactions-enabled="1"
                  data-emit-metadata="0"
                  data-input-position="bottom"
                  data-theme="light"
                  data-lang="zh-CN"
                  crossorigin="anonymous"
                  async>
          </script>
        </div>
      </div>
    </main>

    <!-- 页脚 -->
    <footer class="lgoj-footer">
      <div class="container">
        <p>© 2025 LGOJ 题目浏览站 | 洛谷题目静态浏览平台</p>
      </div>
    </footer>

    <!-- 返回首页按钮 -->
    <a href="/" class="return-home-btn">
      <i class="fas fa-home"></i>
      返回首页
    </a>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      if (typeof hljs !== 'undefined') {
        hljs.highlightAll();
      }
    </script>
    <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
    <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {

        
        // 渲染数学公式
        renderMathInElement(document.body, {
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false},
            {left: '\\(', right: '\\)', display: false},
            {left: '\\[', right: '\\]', display: true}
          ],
          throwOnError: false
        });
      });
    </script>
  </body>
</html>