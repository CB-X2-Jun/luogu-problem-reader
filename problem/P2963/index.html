<!doctype html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="LGOJ é¢˜ç›®æµè§ˆç«™ - æ´›è°·é¢˜ç›®è¯¦æƒ…">
    <meta name="author" content="LGOJ Team">
    <link rel="canonical" href="https://lglg.netlify.app/problem/P2963/">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1336/1336494.png" type="image/png">
    <meta name="generator" content="LGOJ é¢˜ç›®æµè§ˆç«™">
    <title>P2963 P2963 [USACO09NOV] Cow Rescue G - LGOJ é¢˜ç›®æµè§ˆç«™</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      :root {
        --primary-color: #2563eb;
        --primary-dark: #1d4ed8;
        --secondary-color: #10b981;
        --accent-color: #8b5cf6;
        --danger-color: #ef4444;
        --warning-color: #f59e0b;
        --dark-color: #1f2937;
        --light-color: #f9fafb;
        --gray-50: #f9fafb;
        --gray-100: #f3f4f6;
        --gray-200: #e5e7eb;
        --gray-300: #d1d5db;
        --gray-400: #9ca3af;
        --gray-500: #6b7280;
        --gray-600: #4b5563;
        --gray-700: #374151;
        --gray-800: #1f2937;
        --gray-900: #111827;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        --transition: all 0.2s ease-in-out;
      }
      { --md-text-font: "Roboto"; --md-code-font: "Roboto Mono" }
      
      /* LGOJ é¢˜ç›®é¡µé¢æ ·å¼ */
      body {
        font-family: 'Inter', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        background-color: #fff;
        color: var(--gray-900);
        line-height: 1.6;
        margin: 0;
        padding: 0;
      }
      
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }
      
      /* é¡µé¢å¤´éƒ¨ */
      .lgoj-header {
        background: white;
        border-bottom: 1px solid var(--gray-200);
        padding: 1rem 0;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: var(--shadow-sm);
      }
      
      .lgoj-header .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .lgoj-header .logo {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-color);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      
      .lgoj-header .logo:hover {
        color: var(--primary-dark);
      }
      
      .lgoj-header nav {
        display: flex;
        gap: 2rem;
      }
      
      .lgoj-header nav a {
        color: var(--gray-700);
        text-decoration: none;
        font-weight: 500;
        transition: var(--transition);
      }
      
      .lgoj-header nav a:hover {
        color: var(--primary-color);
      }
      
      /* ä¸»è¦å†…å®¹åŒºåŸŸ */
      .main-content {
        min-height: calc(100vh - 200px);
        padding: 2rem 0;
      }
      
      .problem-content {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: var(--shadow);
      }
      
      /* é¡µè„š */
      .lgoj-footer {
        background: var(--gray-50);
        border-top: 1px solid var(--gray-200);
        padding: 2rem 0;
        text-align: center;
        color: var(--gray-600);
      }
      
      /* é¢˜ç›®æ ‡é¢˜ç¾åŒ– */
      .md-content__inner h1 {
        color: var(--gray-900);
        font-size: 2.5rem;
        font-weight: 800;
        margin-bottom: 2rem;
        text-align: center;
        padding: 2rem 0 1rem 0;
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        border-bottom: 2px solid var(--gray-200);
      }
      
      /* é¢˜ç›®å†…å®¹åŒºå—ç¾åŒ– */
      .md-content__inner h2 {
        background: var(--gray-50);
        color: var(--gray-900);
        padding: 1rem 1.5rem;
        border-radius: 8px;
        border-left: 4px solid var(--primary-color);
        margin: 2rem 0 1rem 0;
        font-size: 1.3rem;
        box-shadow: var(--shadow);
        font-weight: 600;
      }
      
      /* ä»£ç å—ç¾åŒ– */
      .md-content__inner pre {
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: var(--shadow);
        margin: 1.5rem 0;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      .md-content__inner pre code {
        background: transparent;
        color: var(--gray-800);
        padding: 0;
        border-radius: 0;
        font-weight: 400;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      .md-content__inner code {
        background: var(--gray-100);
        color: var(--gray-800);
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-weight: 500;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      /* æ ·ä¾‹åŒºå—ç‰¹æ®Šç¾åŒ– */
      .md-content__inner h3 {
        background: linear-gradient(135deg, var(--secondary-color), #059669);
        color: white;
        padding: 0.8rem 1.2rem;
        border-radius: 6px;
        margin: 1.5rem 0 0.8rem 0;
        font-size: 1.1rem;
        box-shadow: var(--shadow);
        font-weight: 600;
      }
      
      /* æ™®é€šæ®µè½ç¾åŒ– */
      .md-content__inner p {
        line-height: 1.8;
        margin: 1rem 0;
        color: var(--gray-700);
        font-size: 1rem;
      }
      
      /* ä¸»è¦å†…å®¹å®¹å™¨ - ç¡®ä¿ä¸è¶…å‡ºé¡µé¢è¾¹ç•Œ */
      .md-content__inner {
        max-width: 100%;
        width: 100%;
        box-sizing: border-box;
        overflow-x: hidden;
        padding: 0 1rem;
      }
      

      
      /* é˜²æ­¢å›¾ç‰‡è¿‡å¤§å½±å“å¸ƒå±€ */
      .md-content__inner img[src*="latex"] {
        display: inline;
        margin: 0;
        box-shadow: none;
        border-radius: 0;
        vertical-align: middle;
      }
      
      /* åˆ—è¡¨ç¾åŒ– */
      .md-content__inner ul, .md-content__inner ol {
        padding-left: 2rem;
        margin: 1rem 0;
      }
      
      .md-content__inner li {
        margin: 0.5rem 0;
        line-height: 1.7;
        color: var(--gray-600);
      }
      
      /* è¡¨æ ¼ç¾åŒ– */
      .md-content__inner table {
        width: 100%;
        border-collapse: collapse;
        margin: 1.5rem 0;
        box-shadow: var(--shadow);
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid var(--gray-200);
      }
      
      .md-content__inner th {
        background: var(--primary-color);
        color: white;
        padding: 1rem;
        text-align: left;
        font-weight: 600;
      }
      
      .md-content__inner td {
        padding: 0.8rem 1rem;
        border-bottom: 1px solid var(--gray-200);
      }
      
      .md-content__inner tr:nth-child(even) {
        background: var(--gray-50);
      }
      
      /* å¼ºè°ƒæ–‡æœ¬ç¾åŒ– */
      .md-content__inner strong {
        color: var(--gray-900);
        font-weight: 600;
      }
      
      .md-content__inner em {
        color: var(--gray-600);
        font-style: italic;
      }
      
      /* é“¾æ¥ç¾åŒ– */
      .md-content__inner a {
        color: var(--primary-color);
        text-decoration: none;
        border-bottom: 1px solid transparent;
        transition: var(--transition);
      }
      
      .md-content__inner a:hover {
        color: var(--primary-dark);
        border-bottom-color: var(--primary-dark);
      }
      
      /* å¼•ç”¨å—ç¾åŒ– */
      .md-content__inner blockquote {
        border-left: 4px solid var(--warning-color);
        background: #fefbf3;
        padding: 1rem 1.5rem;
        margin: 1.5rem 0;
        border-radius: 0 8px 8px 0;
        color: var(--gray-700);
        font-style: italic;
      }
      
      /* æ°´å¹³åˆ†å‰²çº¿ç¾åŒ– */
      .md-content__inner hr {
        border: none;
        height: 2px;
        background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        margin: 2rem 0;
      }
      
      /* å¯¼èˆªæ å“ç‰Œæ›´æ–° */
      .md-header__title .md-header__ellipsis .md-ellipsis {
        color: var(--primary-color);
        font-weight: 700;
      }
      
      /* è¿”å›é¦–é¡µæŒ‰é’® */
      .return-home-btn {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: 500;
        box-shadow: var(--shadow-lg);
        transition: var(--transition);
        z-index: 1000;
      }
      
      .return-home-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        color: white;
        text-decoration: none;
      }
      
      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .md-content__inner {
          padding: 1rem;
        }
        
        .md-content__inner h1 {
          font-size: 2rem;
        }
        
        .md-content__inner h2 {
          font-size: 1.2rem;
          padding: 0.8rem 1rem;
        }
        
        .md-content__inner pre {
          padding: 1rem;
          font-size: 0.9rem;
        }
        
        .lgoj-home-btn {
          position: static;
          margin: 1rem 0;
          width: 100%;
          justify-content: center;
        }
      }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
  </head>
  <body>
    <!-- ç®€æ´çš„é¡µé¢å¤´éƒ¨ -->
    <header class="lgoj-header">
      <div class="container">
        <a href="/" class="logo">
          <i class="fas fa-book"></i>
          LGOJ é¢˜ç›®æµè§ˆç«™
        </a>
        <nav>
          <a href="/">é¦–é¡µ</a>
          <a href="/problem/list">é¢˜åº“</a>
          <a href="/about">å…³äº</a>
        </nav>
      </div>
    </header>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="main-content">
      <div class="container">
        <div class="problem-content">
          <h2 id="_1">é¢˜ç›®æè¿°</h2>
<p>Bessie is trapped in a triangular maze with N rows (1 &lt;= N &lt;= 1,000,000). A three row maze is shown below:</p>
<p>The i'th row of the maze contains 2*i-1 triangles. Numbering from the left, the triangles are named (i,1), (i,2), and so on.</p>
<p>Bessie can travel to the (often three) triangles which share an edge with her current triangle. For example, if she is at (3, 3), she can travel to (3, 2), (3, 4) and (4, 4). Bessie takes one minute to travel from one triangle to the next.</p>
<p>FJ has learned the Bessie is trapped and knows by tracking her iPhone that she starts her exit trek at triangle (Si,Sj). FJ's love for Bessie knows no bounds so he wants her back in the minimum possible time.</p>
<p>The maze has M (1 &lt;= M &lt;= 10,000) exits found in locations throughout the set of triangles. Any one of these will enable Bessie to escape. Once she enters an exit triangle, she leaves the maze in just one more minute.</p>
<p>Find the minimum time in minutes, T, required for Bessie to exit the maze and report the optimal exit location she uses, (OUTi, OUTj). If more than one location requires only T minutes, output the location with the smallest row. If two optimal rows are the same, output the one with smaller column.</p>
<p>è´å¸Œè¢«å›°åœ¨ä¸€ä¸ªä¸‰è§’å½¢çš„è¿·å®«ä¹‹ä¸­ã€‚è¿™ä¸ªè¿·å®«æœ‰ $N$ è¡Œï¼ˆ$1 \le N \le 1000000$ï¼‰ã€‚æ¯”å¦‚ä¸‹å›¾æ˜¯ä¸€ä¸ª $3$ è¡Œçš„è¿·å®«ã€‚  è¿·å®«çš„ç¬¬ $i$ è¡Œæœ‰ $2i-1$ ä¸ªä¸‰è§’å½¢ï¼Œä»å·¦åˆ°å³åˆ†åˆ«ç¼–å·ä¸º $(i, 1)$ã€$(i, 2)$ ç­‰ç­‰ã€‚</p>
<p>è´å¸Œæ¯æ¬¡å¯ä»¥ä»ä¸€ä¸ªä¸‰è§’å½¢èµ°åˆ°ä»»æ„ä¸€ä¸ªä¸€ä¸ªè·Ÿå½“å‰çš„ä¸‰è§’å½¢æœ‰é‚»è¾¹çš„ä¸‰è§’å½¢ã€‚</p>
<p>æ¯”å¦‚è¯´ï¼Œå¦‚æœå¥¹ç›®å‰å¤„äºä¸‰è§’å½¢ $(3, 3)$ï¼Œé‚£ä¹ˆï¼Œå¥¹å¯ä»¥èµ°åˆ°ä¸‰è§’å½¢ $(3, 2)$ã€$(3, 4)$ å’Œ $(4, 4)$ã€‚è´å¸Œæ¯æ¬¡éœ€è¦ä¸€åˆ†é’Ÿçš„æ—¶é—´æ¥ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä¸‰è§’å½¢ã€‚</p>
<p>å†œå¤«çº¦ç¿°å‘ç°è´å¸Œè¢«å›°äº†ï¼äºæ˜¯å¥¹è·Ÿè¸ªè´å¸Œçš„iPhoneæ‰‹æœºï¼ˆå¯æ€œçš„è§¦æ‘¸å±ï½ï¼‰ï¼Œå¾—çŸ¥è´å¸Œç›®å‰å¤„äºä¸‰è§’å½¢ $(S_i, S_j)$ã€‚</p>
<p>å› ä¸ºçº¦ç¿°å¯¹è´å¸Œæœ‰è‘—æ— ç©·æ— å°½çš„æµ“æµ“çˆ±æ„ï¼Œæ‰€ä»¥ä»–å¸Œæœ›è´å¸Œèƒ½å°½å¯èƒ½å¿«åœ°å›åˆ°ä»–çš„èº«è¾¹ã€‚ åœ¨è¿·å®«çš„ä¸‰è§’å½¢ä¹‹ä¸­ï¼Œæœ‰ $M$ï¼ˆ$1 \le M \le 10000$ï¼‰ä¸ªæ˜¯å‡ºå£ã€‚åœ¨ä»»ä½•ä¸€ä¸ªå‡ºå£éƒ½å¯ä»¥è®©è´å¸Œé€ƒç¦»è¿·å®«ã€‚ä¸€æ—¦è´å¸Œè¿›å…¥ä¸€ä¸ªä½œä¸ºå‡ºå£çš„ä¸‰è§’å½¢ï¼Œå¥¹ç”¨å¤šä¸€åˆ†é’Ÿå°±å¯ä»¥é€ƒç¦»è¿™ä¸ªè¿·å®«ã€‚ æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥è®©è´å¸Œé€ƒç¦»è¿·å®«æœ€å°æ—¶é—´ $T$ï¼Œå¹¶è¾“å‡ºå¥¹åº”è¯¥ä»å“ªä¸€ä¸ªå‡ºå£é€ƒç¦»è¿·å®«ï¼Œè¿™ä¸ªå‡ºå£è®°ä¸º $(\text{OUT}_i, \text{OUT}_j)$ã€‚</p>
<p>å¦‚æœæœ‰å¤šä¸ªå‡ºå£åŒæ—¶éœ€è¦æ—¶é—´ $T$ï¼Œè¾“å‡ºé‚£ä¸ªè¡Œçš„ç¼–å·å°çš„å‡ºå£ï¼Œå¦‚æœä»ç„¶æœ‰å¤šä¸ªå‡ºå£ï¼Œè¾“å‡ºé‚£ä¸ªåˆ—çš„ç¼–å·å°çš„ã€‚</p>
<h2 id="_2">è¾“å…¥æ ¼å¼</h2>
<p>* Line 1: Two space-separated integers: N and M</p>
<p>* Line 2: Two space-separated integers: Si and Sj</p>
<p>* Lines 3..M+2: Line i+2 contains two space-separated integers that are the triangle location of exit i: Ei and Ej</p>
<h2 id="_3">è¾“å‡ºæ ¼å¼</h2>
<p>* Line 1: Two space-separated integers: OUTi and OUTj</p>
<p>* Line 2: A single integer: T</p>
<h2 id="_4">è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2>
<h3 id="1">æ ·ä¾‹ #1</h3>
<h4 id="1_1">æ ·ä¾‹è¾“å…¥ #1</h4>
<div class="codehilite"><pre><span></span><code><span class="mf">4</span><span class="w"> </span><span class="mf">2</span><span class="w"> </span>
<span class="mf">2</span><span class="w"> </span><span class="mf">1</span><span class="w"> </span>
<span class="mf">3</span><span class="w"> </span><span class="mf">5</span><span class="w"> </span>
<span class="mf">4</span><span class="w"> </span><span class="mf">4</span>
</code></pre></div>

<h4 id="1_2">æ ·ä¾‹è¾“å‡º #1</h4>
<div class="codehilite"><pre><span></span><code><span class="mf">4</span><span class="w"> </span><span class="mf">4</span><span class="w"> </span>
<span class="mf">4</span>
</code></pre></div>
        </div>
        
        <!-- è¯„è®ºåŒºåŸŸ -->
        <div class="comments-section">
          <div class="comments-title">
            ğŸ’¬ è®¨è®ºäº¤æµ
          </div>
          <script src="https://giscus.app/client.js"
                  data-repo="Eternity-Sky/luogu-problem-reader"
                  data-repo-id="R_kgDOPiP5uw"
                  data-category="Announcements"
                  data-category-id="DIC_kwDOPiP5u84CugHo"
                  data-mapping="url"
                  data-strict="0"
                  data-reactions-enabled="1"
                  data-emit-metadata="0"
                  data-input-position="bottom"
                  data-theme="light"
                  data-lang="zh-CN"
                  crossorigin="anonymous"
                  async>
          </script>
        </div>
      </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="lgoj-footer">
      <div class="container">
        <p>Â© 2025 LGOJ é¢˜ç›®æµè§ˆç«™ | æ´›è°·é¢˜ç›®é™æ€æµè§ˆå¹³å°</p>
      </div>
    </footer>

    <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
    <a href="/" class="return-home-btn">
      <i class="fas fa-home"></i>
      è¿”å›é¦–é¡µ
    </a>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      if (typeof hljs !== 'undefined') {
        hljs.highlightAll();
      }
    </script>
    <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
    <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {

        
        // æ¸²æŸ“æ•°å­¦å…¬å¼
        renderMathInElement(document.body, {
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false},
            {left: '\\(', right: '\\)', display: false},
            {left: '\\[', right: '\\]', display: true}
          ],
          throwOnError: false
        });
      });
    </script>
  </body>
</html>