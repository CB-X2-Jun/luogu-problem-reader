<!doctype html>
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="æ´›è°·é¢˜ç›®æµè§ˆç«™é¢˜ç›®è¯¦æƒ…">
    <meta name="author" content="CB_X2_Jun">
    <link rel="canonical" href="https://lglg.netlify.app/problem/P2987/">
    <link rel="icon" href="../../assets/images/favicon.png">
    <meta name="generator" content="mkdocs-material">
    <title>P2987 [USACO10MAR] StarCowraft G</title>
    <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
    <style>
      :root { --md-text-font: "Roboto"; --md-code-font: "Roboto Mono" }
      
      /* ç¾åŒ–é¢˜ç›®é¡µé¢æ ·å¼ */
      .md-content__inner {
        max-width: 1000px;
        margin: 0 auto;
      }
      
      /* é¢˜ç›®æ ‡é¢˜ç¾åŒ– */
      .md-content__inner h1 {
        color: #2c3e50;
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 2rem;
        text-align: center;
        padding: 1rem 0;
        border-bottom: 3px solid #3498db;
      }
      
      /* é¢˜ç›®å†…å®¹åŒºå—ç¾åŒ– */
      .md-content__inner h2 {
        background: #f8f9fa;
        color: #2c3e50;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        border-left: 4px solid #3498db;
        margin: 2rem 0 1rem 0;
        font-size: 1.3rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        font-weight: 600;
      }
      
      /* ä»£ç å—ç¾åŒ– */
      .md-content__inner pre {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        margin: 1.5rem 0;
      }
      
      .md-content__inner pre code {
        background: transparent;
        color: #2c3e50;
        padding: 0;
        border-radius: 0;
        font-weight: 400;
      }
      
      .md-content__inner code {
        background: #e9ecef;
        color: #495057;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-weight: 500;
      }
      
      /* æ ·ä¾‹åŒºå—ç‰¹æ®Šç¾åŒ– */
      .md-content__inner h3:contains("æ ·ä¾‹") {
        background: #f0f8ff;
        color: #2c3e50;
        padding: 0.8rem 1.2rem;
        border-radius: 6px;
        border-left: 4px solid #17a2b8;
        margin: 1.5rem 0 0.8rem 0;
        font-size: 1.1rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        font-weight: 600;
      }
      
      /* æ™®é€šæ®µè½ç¾åŒ– */
      .md-content__inner p {
        line-height: 1.8;
        margin: 1rem 0;
        color: #444;
      }
      
      /* åˆ—è¡¨ç¾åŒ– */
      .md-content__inner ul, .md-content__inner ol {
        padding-left: 2rem;
        margin: 1rem 0;
      }
      
      .md-content__inner li {
        margin: 0.5rem 0;
        line-height: 1.6;
      }
      
      /* è¡¨æ ¼ç¾åŒ– */
      .md-content__inner table {
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        margin: 1.5rem 0;
      }
      
      .md-content__inner th {
        background: #e9ecef;
        color: #495057;
        font-weight: 600;
      }
      
      /* è¿”å›æŒ‰é’®ç¾åŒ– */
      .back-button {
        display: inline-block;
        background: #3498db;
        color: white;
        padding: 0.8rem 1.5rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        margin: 2rem 0;
        transition: background-color 0.3s;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      
      .back-button:hover {
        background: #2980b9;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        color: white;
        text-decoration: none;
      }
      
      /* Giscusè¯„è®ºåŒºåŸŸæ ·å¼ */
      .comments-section {
        margin: 3rem 0 2rem 0;
        padding: 2rem;
        background: #f8f9fa;
        border-radius: 12px;
        border: 1px solid #e9ecef;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      }
      
      .comments-title {
        color: #2c3e50;
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #3498db;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      
      /* è‡ªå®šä¹‰Giscusæ ·å¼ */
      .giscus {
        margin-top: 1rem;
      }
      
      .giscus-frame {
        border-radius: 8px;
        border: 1px solid #e9ecef;
      }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
  </head>
  <body dir="ltr">
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      <a href="#é¢˜ç›®å†…å®¹" class="md-skip">è·³è½¬è‡³</a>
    </div>
    <div data-md-component="announce"></div>
    
    <div id="__config" data-md-config="{&quot;base&quot;:&quot;../..&quot;,&quot;features&quot;:[],&quot;search&quot;:{&quot;worker&quot;:&quot;assets/javascripts/workers/search.b8dbb3d2.min.js&quot;}}"></div>
    
    <header class="md-header md-header--shadow" data-md-component="header">
      <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
        <a href="/" title="æ´›è°·é¢˜ç›®æµè§ˆç«™" class="md-header__button md-logo" aria-label="æ´›è°·é¢˜ç›®æµè§ˆç«™" data-md-component="logo">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
        </a>
        <label class="md-header__button md-icon" for="__drawer">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
        </label>
        <div class="md-header__title" data-md-component="header-title">
          <div class="md-header__ellipsis">
            <div class="md-header__topic">
              <span class="md-ellipsis">æ´›è°·é¢˜ç›®æµè§ˆç«™</span>
            </div>
            <div class="md-header__topic" data-md-component="header-topic">
              <span class="md-ellipsis">P2987 [USACO10MAR] StarCowraft G</span>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <div class="md-container" data-md-component="container">
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          <!-- ä¾§è¾¹æ å¯¼èˆª -->
          <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" aria-label="å¯¼èˆªæ " data-md-level="0">
                  <label class="md-nav__title" for="__drawer">
                    <a href="/" title="æ´›è°·é¢˜ç›®æµè§ˆç«™" class="md-nav__button md-logo" aria-label="æ´›è°·é¢˜ç›®æµè§ˆç«™" data-md-component="logo">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
                    </a>
                    æ´›è°·é¢˜ç›®æµè§ˆç«™
                  </label>
                  <ul class="md-nav__list" data-md-scrollfix>
                    <li class="md-nav__item">
                      <a href="/" class="md-nav__link">
                        <span class="md-ellipsis">ğŸ  é¦–é¡µ</span>
                      </a>
                    </li>
                    <li class="md-nav__item">
                      <a href="/problem/list/" class="md-nav__link">
                        <span class="md-ellipsis">ğŸ“‹ é¢˜ç›®åˆ—è¡¨</span>
                      </a>
                    </li>
                    <li class="md-nav__item">
                      <a href="/about/" class="md-nav__link">
                        <span class="md-ellipsis">â„¹ï¸ å…³äº</span>
                      </a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              <h2 id="_1">é¢˜ç›®æè¿°</h2>
<p>The beta version of StarCowraft II is ready! Farmer John and Bessie are testing it, trying different strategies in one-on-one battles against each other's armies. The goal in StarCowraft II is to defeat your opponent's army in a battle.</p>
<p>Each player's army fights in a battle. An army comprises as many as three different types of 'units' with respective strengths denoted by constant positive real numbers unknown to the players: cattlebruisers with strength S1, cow templars with strength S2, and ultracows with strength S3. The only given bounding information is that no unit is more than 100 times as strong as any another unit.</p>
<p>An army's total strength is the sum of the individual strengths of each of its units. An army that has, among others units, 23</p>
<p>cattlebruisers would gain 23*S1 strength just from the cattlebruisers.</p>
<p>When two opposing armies fight in a battle, the army with a higher total strength value wins.  If the armies have exactly equal strength values, one of the players randomly wins.</p>
<p>Farmer John and Bessie played N (0 &lt;= N &lt;= 300) 'test battles'. In the i-th test battle, FJ's army had J1_i cattlebruisers, J2_i cow templars, and J3_i ultracows (0 &lt;= J1_i + J2_i + J3_i &lt;= 1,000). Similarly, Bessie's army had B1_i cattlebruisers, B2_i cow templars, and B3_i ultracows (0 &lt;= B1_i + B2_i + B3_i &lt;= 1,000). After their armies fought against each other, FJ and Bessie recorded the winner as a single 'victory letter' V_i: 'J' if Farm John won the battle; 'B' if Bessie won.</p>
<p>Although these victory results are the only information that they have, they hope to predict some of the results of additional battles if they are given the unit compositions of two opposing armies. For some battles, though, they know it might not be possible to determine the winner with certainty.</p>
<p>Given the results of the N test battles that Farmer John and Bessie already played, write a program that decides the winner (if possible) for M (1 &lt;= M &lt;= 2,000) new battles.</p>
<p>The results reported for the test battles are correct; there exists at least one set of strength values which are consistent with the results.</p>
<p>For purposes of demonstrating the army strength evaluation functions, consider these test battles fought in a game where we (but neither FJ nor Bessie) know that S1=9.0, S2=7.0, and S3=4.0:</p>
<pre class="codehilite"><code class="language-cpp">---- Farmer John ----    ------- Bessie ------    Battle 
J1  J2  J3 J_Strength    B1  B2  B3 B_Strength   Outcome 
6   5   4    105         5   4   7    101          J 
5   4   2     81         3   5   5     82          B 
9   0  10    121         8   2   7    114          J 
</code></pre>

<p>These results connote the following deduced results for the reasons shown:</p>
<p>---- Farmer John ----    ------- Bessie ------    Battle</p>
<p>J1  J2  J3 J_Strength    B1  B2  B3 B_Strength   Outcome</p>
<p>6   6   4    112         5   4   7    101          J</p>
<p>FJ's army is even stronger than in test battle 1 9   0  10    121         8   2   6    110          J</p>
<p>Bessie's army is even weaker than in test battle 3</p>
<p>ã€Šæ˜Ÿé™…äº‰éœ¸2ã€‹å…¨é¢å…¬æµ‹å•¦ï¼Farmer Johnå’ŒBessieæ­£åœ¨æµ‹è¯•ä¸­â€”â€”åœ¨1v1çš„æˆ˜å½¹ä¸­ä½¿ç”¨ä¸€äº›ä¸åŒçš„ç­–ç•¥æ¥å¯¹æŠ—å¯¹æ–¹çš„éƒ¨é˜Ÿã€‚ã€Šæ˜Ÿé™…äº‰éœ¸2ã€‹çš„æ¸¸æˆç›®æ ‡å°±æ˜¯åœ¨æˆ˜å½¹ä¸­æ‰“è´¥ä½ å¯¹æ‰‹çš„å†›é˜Ÿã€‚</p>
<p>æ¯ä¸ªé€‰æ‰‹çš„å†›é˜Ÿéƒ½åœ¨æˆ˜å½¹ä¸­æ‹¼æ€ã€‚ä¸€æ”¯å†›é˜Ÿç”±è‹¥å¹²3ç§ä¸åŒç±»å‹çš„å•ä½æ‰€ç»„æˆï¼Œä¸åŒå•ä½æœ‰ç€ä¸åŒçš„ç”±æ­£å®æ•°è¡¨ç¤ºçš„ï¼Œä¸”ä¸è¢«é€‰æ‰‹æ‰€çŸ¥é“çš„åŠ›é‡å€¼ï¼šcattlebruisers çš„åŠ›é‡æ˜¯S1ï¼Œcow templars çš„åŠ›é‡æ˜¯S2ï¼Œultracowsçš„åŠ›é‡æ˜¯S3ã€‚å”¯ä¸€æä¾›çš„ä¿¡æ¯æ˜¯ï¼Œæ²¡æœ‰ä¸€ä¸ªå•ä½çš„åŠ›é‡å€¼è¶…è¿‡å¦ä¸€ä¸ªå•ä½åŠ›é‡å€¼çš„100å€ã€‚</p>
<p>ä¸€æ”¯å†›é˜Ÿçš„æ€»åŠ›é‡å€¼ï¼Œæ˜¯å…¶ä¸­å„è‡ªå•ç‹¬çš„å•ä½çš„åŠ›é‡å€¼çš„æ€»å’Œã€‚æ¯”å¦‚ä¸€æ”¯å†›é˜Ÿé™¤äº†å…¶ä»–å•ä½æœ‰23ä¸ªcattlebruisersï¼Œé‚£ä¹ˆè¿™æ”¯å†›é˜Ÿå•ç‹¬ä»cattlebruiserså°±èƒ½è·å¾—23*S1çš„åŠ›é‡å€¼ã€‚</p>
<p>å½“ä¸¤æ”¯å¯¹ç«‹çš„å†›é˜Ÿåœ¨æˆ˜å½¹ä¸­å®æ€ï¼Œæœ‰ç€æ›´é«˜åŠ›é‡å€¼çš„å†›é˜Ÿå°†è·å¾—èƒœåˆ©ã€‚å¦‚æœä¸¤æ”¯å†›é˜Ÿçš„åŠ›é‡å€¼æ°å¥½ç›¸åŒï¼Œé‚£ä¹ˆå°†éšæœºäº§ç”Ÿä¸€ä¸ªè·èƒœæ–¹ã€‚</p>
<p>Farmer John å’Œ Bessie è¿›è¡Œäº† N (0 &lt;= N &lt;= 300) å±€çš„â€œæµ‹è¯•æˆ˜å½¹â€ã€‚åœ¨ç¬¬ i å±€æµ‹è¯•æˆ˜å½¹ä¸­ï¼ŒFarmer John æœ‰ J1_i ä¸ª cattlebruisersï¼ŒJ2_i ä¸ª cow templars ä»¥åŠ J3_i ä¸ª ultracows(0 &lt;= J1_i + J2_i + J3_i &lt;= 1,000)ã€‚ç›¸ä¼¼çš„ï¼ŒBessieçš„å†›é˜Ÿæœ‰ B1_i ä¸ª cattlebruisersï¼ŒB2_i ä¸ª cow templars ä»¥åŠ B3_i ä¸ª ultracows (0 &lt;= B1_i + B2_i + B3_i &lt;= 1,000)ã€‚å½“ä»–ä»¬çš„å†›é˜Ÿæˆ˜æ–—ç»“æŸåï¼ŒFJ å’Œ Bessie å°†èƒœè€…ä»¥ä¸€ä¸ªå•ç‹¬çš„â€œèƒœåˆ©å­—æ¯â€ V_i è®°å½•ä¸‹æ¥ï¼š"J"è¡¨ç¤º Farmer John èµ¢å¾—äº†æˆ˜å½¹ï¼›"B" è¡¨ç¤º Bessie è·èƒœäº†ã€‚</p>
<p>è™½ç„¶è¿™äº›ç»“æœæ˜¯ä»–ä»¬å”¯ä¸€æ‰€æ‹¥æœ‰çš„ä¿¡æ¯ï¼Œä½†æ˜¯ä»–ä»¬å¸Œæœ›é¢„æµ‹ä¸€äº›é¢å¤–çš„æˆ˜å½¹çš„ç»“æœâ€”â€”å¦‚æœå‘ŠçŸ¥ä»–ä»¬ä¸¤æ”¯å¯¹ç«‹å†›é˜Ÿçš„ç»„æˆã€‚å°½ç®¡ï¼Œå¯èƒ½å¯¹äºä¸€äº›æ¯”èµ›ä»–ä»¬æ˜¯æ— æ³•ç¡®å®šåˆ°åº•å“ªä¸€æ–¹ä¸€å®šèƒ½è·èƒœçš„ã€‚</p>
<p>ç»™å‡ºå·²ç»ç»“æŸçš„ N åœºæµ‹è¯•æˆ˜å½¹çš„ç»“æœï¼Œå†™ä¸€ä¸ªç¨‹åºæ¥ç¡®å®š(å¦‚æœå¯èƒ½çš„è¯)M (1 &lt;=M &lt;=2,000)åœºé¢å¤–æˆ˜å½¹çš„è·èƒœæ–¹ã€‚</p>
<p>æ‰€æœ‰ç»™å‡ºçš„æµ‹è¯•æˆ˜å½¹çš„ç»“æœéƒ½æ˜¯æ­£ç¡®çš„ã€‚è‡³å°‘å­˜åœ¨ä¸€ç§åˆæ³•çš„åŠ›é‡å€¼çš„å–å€¼ç¬¦åˆè¿™äº›ç»“æœã€‚</p>
<h2 id="_2">è¾“å…¥æ ¼å¼</h2>
<p>* Line 1: Two space-separated integers: N and M</p>
<p>* Lines 2..N+1: Line i+1 describes a test battle with seven</p>
<p>space-separated items -- a victory letter and six</p>
<p>space-separated integer unit counts: V_i, J1_i, J2_i, J3_i, B1_i, B2_i, and B3_i</p>
<p>* Lines N+2..N+M+1: Line i+N+1 describes a 'new battle' using six space-separated integers: J1_i, J2_i, J3_i, B1_i, B2_i, and B3_i</p>
<h2 id="_3">è¾“å‡ºæ ¼å¼</h2>
<p>* Lines 1..M: Line i contains the outcome of the i-th new battle: 'J' if Farmer John definitely wins, 'B' if Bessie definitely wins, and 'U' (undecidable) if it is impossible to decide the winner with the given information.</p>
<h2 id="_4">è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2>
<h3 id="1">æ ·ä¾‹ #1</h3>
<h4 id="1_1">æ ·ä¾‹è¾“å…¥ #1</h4>
<pre class="codehilite"><code>3 3 
J 6 5 4 5 4 7 
B 5 4 2 3 5 5 
J 9 0 10 8 2 7 
6 6 4 5 4 7 
9 0 10 8 2 6 
3 4 8 4 4 6
</code></pre>

<h4 id="1_2">æ ·ä¾‹è¾“å‡º #1</h4>
<pre class="codehilite"><code>J 
J 
U
</code></pre>

<h2 id="_5">è¯´æ˜/æç¤º</h2>
<p>First two games correspond to the examples in the description. The result of the last game cannot be determined with only the information that Farmer John and Bessie currently have. Specifically, both S_1=9.0, S_2=7.0, S_3=4.0 and S_1=12.0, S_2=20.0, S_3=10.0 are consistent with the &quot;test battles,&quot; but they give different results when plugged in the third &quot;new battle.&quot;</p>
              
              <!-- Giscusè¯„è®ºç³»ç»Ÿ -->
              <div class="comments-section">
                <div class="comments-title">
                  ğŸ’¬ è®¨è®ºäº¤æµ
                </div>
                <script src="https://giscus.app/client.js"
                        data-repo="Eternity-Sky/luogu-problem-reader"
                        data-repo-id="R_kgDOPiP5uw"
                        data-category="Announcements"
                        data-category-id="DIC_kwDOPiP5u84CugHo"
                        data-mapping="url"
                        data-strict="0"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="bottom"
                        data-theme="preferred_color_scheme"
                        data-lang="zh-CN"
                        data-loading="lazy"
                        crossorigin="anonymous"
                        async>
                </script>
              </div>
            </article>
          </div>
        </div>
      </main>
      <footer class="md-footer">
        <div class="md-footer-meta md-typeset">
          <div class="md-footer-meta__inner md-grid">
            <div class="md-copyright">
              <div class="md-copyright__highlight">Â© 2025 æ´›è°·é¢˜ç›®æµè§ˆç«™</div>
              Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">Material for MkDocs</a>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      if (typeof hljs !== 'undefined') {
        hljs.highlightAll();
      }
    </script>
    <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
    <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, { 
          delimiters: [
            {"left":"$$","right":"$$","display":true},
            {"left":"$","right":"$","display":false},
            {"left":"\\(","right":"\\)","display":false},
            {"left":"\\[","right":"\\]","display":true}
          ],
          throwOnError: false,
          strict: false,
          trust: true
        });
      });
    </script>
  </body>
</html>