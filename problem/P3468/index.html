<!doctype html>
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="æ´›è°·é¢˜ç›®æµè§ˆç«™é¢˜ç›®è¯¦æƒ…">
    <meta name="author" content="CB_X2_Jun">
    <link rel="canonical" href="https://lglg.netlify.app/problem/P3468/">
    <link rel="icon" href="../../assets/images/favicon.png">
    <meta name="generator" content="mkdocs-material">
    <title>P3468 [POI 2008] ROB-Robinson</title>
    <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
    <style>
      :root { --md-text-font: "Roboto"; --md-code-font: "Roboto Mono" }
      
      /* ç¾åŒ–é¢˜ç›®é¡µé¢æ ·å¼ */
      .md-content__inner {
        max-width: 1000px;
        margin: 0 auto;
      }
      
      /* é¢˜ç›®æ ‡é¢˜ç¾åŒ– */
      .md-content__inner h1 {
        color: #2c3e50;
        font-size: 2.5rem;
        font-weight: bold;
        margin-bottom: 2rem;
        text-align: center;
        padding: 1rem 0;
        border-bottom: 3px solid #3498db;
      }
      
      /* é¢˜ç›®å†…å®¹åŒºå—ç¾åŒ– */
      .md-content__inner h2 {
        background: #f8f9fa;
        color: #2c3e50;
        padding: 1rem 1.5rem;
        border-radius: 8px;
        border-left: 4px solid #3498db;
        margin: 2rem 0 1rem 0;
        font-size: 1.3rem;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        font-weight: 600;
      }
      
      /* ä»£ç å—ç¾åŒ– */
      .md-content__inner pre {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        margin: 1.5rem 0;
      }
      
      .md-content__inner pre code {
        background: transparent;
        color: #2c3e50;
        padding: 0;
        border-radius: 0;
        font-weight: 400;
      }
      
      .md-content__inner code {
        background: #e9ecef;
        color: #495057;
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-weight: 500;
      }
      
      /* æ ·ä¾‹åŒºå—ç‰¹æ®Šç¾åŒ– */
      .md-content__inner h3:contains("æ ·ä¾‹") {
        background: #f0f8ff;
        color: #2c3e50;
        padding: 0.8rem 1.2rem;
        border-radius: 6px;
        border-left: 4px solid #17a2b8;
        margin: 1.5rem 0 0.8rem 0;
        font-size: 1.1rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        font-weight: 600;
      }
      
      /* æ™®é€šæ®µè½ç¾åŒ– */
      .md-content__inner p {
        line-height: 1.8;
        margin: 1rem 0;
        color: #444;
      }
      
      /* åˆ—è¡¨ç¾åŒ– */
      .md-content__inner ul, .md-content__inner ol {
        padding-left: 2rem;
        margin: 1rem 0;
      }
      
      .md-content__inner li {
        margin: 0.5rem 0;
        line-height: 1.6;
      }
      
      /* è¡¨æ ¼ç¾åŒ– */
      .md-content__inner table {
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        margin: 1.5rem 0;
      }
      
      .md-content__inner th {
        background: #e9ecef;
        color: #495057;
        font-weight: 600;
      }
      
      /* è¿”å›æŒ‰é’®ç¾åŒ– */
      .back-button {
        display: inline-block;
        background: #3498db;
        color: white;
        padding: 0.8rem 1.5rem;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        margin: 2rem 0;
        transition: background-color 0.3s;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      
      .back-button:hover {
        background: #2980b9;
        transform: translateY(-1px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        color: white;
        text-decoration: none;
      }
      
      /* Giscusè¯„è®ºåŒºåŸŸæ ·å¼ */
      .comments-section {
        margin: 3rem 0 2rem 0;
        padding: 2rem;
        background: #f8f9fa;
        border-radius: 12px;
        border: 1px solid #e9ecef;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      }
      
      .comments-title {
        color: #2c3e50;
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #3498db;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      
      /* è‡ªå®šä¹‰Giscusæ ·å¼ */
      .giscus {
        margin-top: 1rem;
      }
      
      .giscus-frame {
        border-radius: 8px;
        border: 1px solid #e9ecef;
      }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
  </head>
  <body dir="ltr">
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      <a href="#é¢˜ç›®å†…å®¹" class="md-skip">è·³è½¬è‡³</a>
    </div>
    <div data-md-component="announce"></div>
    
    <div id="__config" data-md-config="{&quot;base&quot;:&quot;../..&quot;,&quot;features&quot;:[],&quot;search&quot;:{&quot;worker&quot;:&quot;assets/javascripts/workers/search.b8dbb3d2.min.js&quot;}}"></div>
    
    <header class="md-header md-header--shadow" data-md-component="header">
      <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
        <a href="/" title="æ´›è°·é¢˜ç›®æµè§ˆç«™" class="md-header__button md-logo" aria-label="æ´›è°·é¢˜ç›®æµè§ˆç«™" data-md-component="logo">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
        </a>
        <label class="md-header__button md-icon" for="__drawer">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
        </label>
        <div class="md-header__title" data-md-component="header-title">
          <div class="md-header__ellipsis">
            <div class="md-header__topic">
              <span class="md-ellipsis">æ´›è°·é¢˜ç›®æµè§ˆç«™</span>
            </div>
            <div class="md-header__topic" data-md-component="header-topic">
              <span class="md-ellipsis">P3468 [POI 2008] ROB-Robinson</span>
            </div>
          </div>
        </div>
      </nav>
    </header>
    <div class="md-container" data-md-component="container">
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          <!-- ä¾§è¾¹æ å¯¼èˆª -->
          <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" aria-label="å¯¼èˆªæ " data-md-level="0">
                  <label class="md-nav__title" for="__drawer">
                    <a href="/" title="æ´›è°·é¢˜ç›®æµè§ˆç«™" class="md-nav__button md-logo" aria-label="æ´›è°·é¢˜ç›®æµè§ˆç«™" data-md-component="logo">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>
                    </a>
                    æ´›è°·é¢˜ç›®æµè§ˆç«™
                  </label>
                  <ul class="md-nav__list" data-md-scrollfix>
                    <li class="md-nav__item">
                      <a href="/" class="md-nav__link">
                        <span class="md-ellipsis">ğŸ  é¦–é¡µ</span>
                      </a>
                    </li>
                    <li class="md-nav__item">
                      <a href="/problem/list/" class="md-nav__link">
                        <span class="md-ellipsis">ğŸ“‹ é¢˜ç›®åˆ—è¡¨</span>
                      </a>
                    </li>
                    <li class="md-nav__item">
                      <a href="/about/" class="md-nav__link">
                        <span class="md-ellipsis">â„¹ï¸ å…³äº</span>
                      </a>
                    </li>
                  </ul>
                </nav>
              </div>
            </div>
          </div>
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              <h2 id="_1">é¢˜ç›®æè¿°</h2>
<p>Tossed by the storm on a deserted island, Robinson built himself a boat    so that he could go out to the sea and seek out human domicile.</p>
<p>He is an experienced sailor, therefore he built the boat with accordance to the rules    of craftsmanship: it has a longitudinal axis of symmetry and an appropriate    shape. The boat's prow is thin, and it widens gradually towards the boat's centre,    only to gradually narrow once again towards the stern.</p>
<p>In particular, at some point in the middle the boat is wider than both at the    prow and stern.</p>
<p>Unfortunately, Robinson has launched his boat in a most improper space: there    is extremely thick reed all around. It is, moreover, so stiff that the boat    cannot break through. Perhaps Robinson can get to the high seas by carefully    manoeuvring between the reed.</p>
<p>Due to lack of manoeuvrability, the boat can move forward and backward and    even sidewards (leftward or rightward), but it cannot turn.</p>
<p>It is thus allowed, and may be in fact necessary, that the boat moves with    its stern or broadside to the front.</p>
<p>You are to judge if Robinson can get to the high seas.</p>
<p>To make your task easier the island and its surroundings will be    represented by a square map divided into square unit fields, each    occupied by either water, part of Robinson's boat or an obstacle, eg.</p>
<p>land or reed. Initially the boat is set parallel to one of the cardinal    directions, ie. its longitudinal axis of symmetry is parallel to this    direction and the axis bisects the unit fields it is covered with.</p>
<p>We assume that the high seas starts where the map ends.</p>
<p>Hence Robinson may get to the high seas if his boat can leave    the area depicted in the map.</p>
<p>A single move consists in moving the boat to a side-adjacent    field in a chosen direction (north, south, east or west).</p>
<p>The move is permissible if both before and after it the boat    remains entirely in water (it does not occupy a field with an    obstacle).</p>
<p>Task      You are to write a programme that                        reads the map's description from the standard input,                      calculates the minimum possible number of boat's moves that          suffice to completely leave the area depicted in the map,                      writes out this number to the standard output.</p>
<p>è¢«é£æš´æŠ›å¼ƒåœ¨è’å²›ä¸Šçš„é²æ»¨é€Šï¼ˆåˆè¯‘é²æ»¨å­™ï¼‰è‡ªå·±é€ äº†ä¸€æ¡èˆ¹ï¼Œè¿™æ ·ä»–å°±å¯ä»¥å‡ºæµ·å»å¯»æ‰¾æœ‰äººç±»å±…ä½çš„åœ°æ–¹ã€‚</p>
<p>ä»–æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„æ°´æ‰‹ï¼Œå› æ­¤ä»–æ ¹æ®æŠ€æœ¯è§„ç¨‹å»ºé€ äº†å®ƒã€‚å®ƒæœ‰ä¸€æ¡çºµå‘çš„å¯¹ç§°è½´ï¼Œä»¥åŠé€‚äºèˆªè¡Œçš„å¤–å½¢ï¼šèˆ¹å¤´è¾ƒå°–ï¼Œå‘èˆ¹ä¸­é€æ¸æ‰©å®½ï¼Œåˆ°èˆ¹å°¾åˆé€æ¸æ”¶çª„ã€‚</p>
<p>ç‰¹åˆ«çš„æ˜¯ï¼Œèˆ¹ä¸­çš„ä¸€äº›ç‚¹æ¯”èˆ¹å¤´å’Œèˆ¹å°¾éƒ½å®½ã€‚</p>
<p>å¯æ˜¯å¾ˆä¸å¹¸ï¼Œé²æ»¨é€Šåœ¨æœ€ä¸åˆé€‚çš„ä½ç½®è®©ä»–çš„èˆ¹ä¸‹äº†æ°´ï¼šå‘¨å›´æœ‰æå…¶åšçš„èŠ¦è‹‡ã€‚æ­¤å¤–ï¼Œè¿™æ¡èˆ¹å¤ªåƒµç¡¬ä»¥è‡³äºå®ƒæ— æ³•çªç ´èŠ¦è‹‡ã€‚ä¸è¿‡æˆ–è®¸é²æ»¨é€Šå¯ä»¥é€šè¿‡åœ¨èŠ¦è‹‡ä¸­å°å¿ƒç¿¼ç¿¼åœ°æ“çºµèˆ¹å»å¾€å…¬æµ·ã€‚</p>
<p>ç”±äºèˆ¹å¤ªä¸çµæ´»ï¼Œèˆ¹å¯ä»¥å‰è¿›ã€åé€€ç”šè‡³æ¨ªç€ï¼ˆå‘å·¦æˆ–å‘å³ï¼‰ç§»åŠ¨ï¼Œä½†å®ƒä¸èƒ½æ‰å¤´ã€‚</p>
<p>å…è®¸èˆ¹çš„èˆ¹å°¾æˆ–è€…èˆ¹èˆ·åœ¨å‰è¿›è¡Œç§»åŠ¨ï¼Œäº‹å®ä¸Šè¿™å¯èƒ½æ˜¯å¿…è¦çš„ã€‚</p>
<p>ä½ éœ€è¦åˆ¤æ–­é²æ»¨é€Šæ˜¯å¦å¯ä»¥åˆ°è¾¾å…¬æµ·ã€‚</p>
<p>ä¸ºäº†ç®€åŒ–ä½ çš„å·¥ä½œï¼Œå²›å±¿å’Œå‘¨å›´çš„ç¯å¢ƒå°†ç”±ä¸€å¼ åˆ’åˆ†æˆæ–¹æ ¼çš„æ­£æ–¹å½¢åœ°å›¾è¡¨ç¤ºï¼Œæ¯æ ¼åªå¯èƒ½æ˜¯æ°´ã€é²æ»¨é€Šèˆ¹çš„ä¸€éƒ¨åˆ†æˆ–éšœç¢ç‰©ï¼ˆæ¯”å¦‚è¯´å²›å±¿å’ŒèŠ¦è‹‡ï¼‰ã€‚æœ€åˆèˆ¹å¹³è¡Œäºä¸€ä¸ªä¸»è¦æ–¹å‘ï¼ˆæ¢å¥è¯è¯´ï¼Œå³å…¶çºµå‘å¯¹ç§°è½´å¹³è¡Œäºæ­¤æ–¹å‘ä¸”å…¶å¹³åˆ†å…¶è¦†ç›–çš„æ–¹æ ¼ï¼‰</p>
<p>æˆ‘ä»¬å‡å®šåœ°å›¾ä¹‹å¤–å°±æ˜¯å…¬æµ·ã€‚</p>
<p>å› æ­¤ï¼Œå¦‚æœä»–çš„èˆ¹å¯ä»¥ç¦»å¼€åœ°å›¾æç»˜çš„åŒºåŸŸï¼Œé²æ»¨é€Šä¹Ÿè®¸å°±èƒ½åˆ°è¾¾å…¬æµ·äº†ã€‚</p>
<p>ä¸€æ­¥è¡¨ç°ä¸ºèˆ¹å¾€é€‰å®šçš„æ–¹å‘ï¼ˆåŒ—ï¼Œå—ï¼Œä¸œæˆ–è¥¿ï¼‰ç§»åŠ¨ä¸€æ ¼ã€‚</p>
<p>å¦‚æœç§»åŠ¨å‰åçš„èˆ¹ä¿æŒæ•´ä¸ªåœ¨æ°´ä¸­ï¼ˆä¸å æ®ä»»ä½•æœ‰éšœç¢ç‰©çš„æ ¼å­ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªç§»åŠ¨æ˜¯åˆæ³•çš„ã€‚</p>
<p>ä½ çš„ä»»åŠ¡æ˜¯ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–åœ°å›¾çš„æè¿°ï¼Œè®¡ç®—èˆ¹ç¦»å¼€åœ°å›¾æè¿°çš„åŒºåŸŸçš„æœ€å°‘æ­¥æ•°ï¼Œå¹¶è¾“å‡ºè‡³æ ‡å‡†è¾“å‡ºã€‚</p>
<h2 id="_2">è¾“å…¥æ ¼å¼</h2>
<p>The first line contains one integer $3\le n\le 2000$, denoting the length of the map's side.</p>
<p>In each of the following $n$ lines there are $n$ characters      describing successive fields of the map:</p>
<p>$i^{th}$ character in the $(j+1)^{th}$ line tells the contents      of the field $(i,j)$.</p>
<p>The following characters may appear there:</p>
<p>"." - (dot) denotes a field filled with water,             "X" - denotes an obstacle (land or reed),             "r" - denotes a part of Robinson's boat.
ç¬¬ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•° $$3\le_n\le_2000$,$ è¡¨ç¤ºåœ°å›¾çš„è¾¹é•¿ã€‚</p>
<p>æ¥ä¸‹æ¥ $n$ è¡Œæ¯è¡Œ $n$ ä¸ªå­—ç¬¦è¡¨ç¤ºåœ°å›¾ï¼šï¼ˆæ­¤å¤„çœç•¥ä¸¤å¼ å›¾ç‰‡ï¼‰ç¬¬ $(j+1)$ è¡Œçš„çš„ç¬¬ $i$ ä¸ªå­—ç¬¦è¡¨ç¤ºæ–¹æ ¼ $(i,j)$ã€‚ä»¥ä¸‹çš„å­—ç¬¦å¯èƒ½ä¼šåœ¨è¾“å…¥ä¸­å‡ºç°ï¼š<code>.</code>è¡¨ç¤ºä¸€æ ¼æ°´ï¼Œ<code>X</code> è¡¨ç¤ºä¸€æ ¼éšœç¢ç‰©ï¼ˆå²›å±¿æˆ–èŠ¦è‹‡ï¼‰ï¼Œ<code>R</code> è¡¨ç¤ºé²æ»¨å­™çš„èˆ¹çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h2 id="_3">è¾“å‡ºæ ¼å¼</h2>
<p>Your programme should write out (in the first and only line of      the standard output) a single positive integer, equal to      the minimum number of boat's moves that suffice to completely      leave the area depicted in the map.</p>
<p>Should getting to the high seas be impossible, write out the word      'NIE' ('no' in Polish).</p>
<p>ä½ çš„ç¨‹åºåº”å½“è¾“å‡ºï¼ˆåœ¨æ ‡å‡†è¾“å‡ºçš„ç¬¬ä¸€è¡Œä¸”ä»…æœ‰ä¸€è¡Œï¼‰ä¸€æ ¼æ­£æ•´æ•°è¡¨ç¤ºé²æ»¨é€Šçš„èˆ¹å®Œå…¨ç¦»å¼€åœ°å›¾æ ‡ç¤ºçš„åŒºåŸŸéœ€è¦çš„æœ€å°æ­¥æ•°ã€‚</p>
<p>å¦‚æœé²å®¾é€Šæ— æ³•åˆ°è¾¾å…¬æµ·ï¼Œè¾“å‡ºä¸€è¡Œ <code>NIE</code>ï¼ˆæ³¢å…°è¯­ä¸­å¦å®šçš„æ„æ€ï¼‰</p>
<h2 id="_4">è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2>
<h3 id="1">æ ·ä¾‹ #1</h3>
<h4 id="1_1">æ ·ä¾‹è¾“å…¥ #1</h4>
<pre class="codehilite"><code>10
..........
..........
..r.......
.rrrX.....
rrrrr.....
.rrr......
X.r.......
.Xr.......
..........
..........
</code></pre>

<h4 id="1_2">æ ·ä¾‹è¾“å‡º #1</h4>
<pre class="codehilite"><code>10
</code></pre>
              
              <!-- Giscusè¯„è®ºç³»ç»Ÿ -->
              <div class="comments-section">
                <div class="comments-title">
                  ğŸ’¬ è®¨è®ºäº¤æµ
                </div>
                <script src="https://giscus.app/client.js"
                        data-repo="Eternity-Sky/luogu-problem-reader"
                        data-repo-id="R_kgDOPiP5uw"
                        data-category="Announcements"
                        data-category-id="DIC_kwDOPiP5u84CugHo"
                        data-mapping="url"
                        data-strict="0"
                        data-reactions-enabled="1"
                        data-emit-metadata="0"
                        data-input-position="bottom"
                        data-theme="preferred_color_scheme"
                        data-lang="zh-CN"
                        data-loading="lazy"
                        crossorigin="anonymous"
                        async>
                </script>
              </div>
            </article>
          </div>
        </div>
      </main>
      <footer class="md-footer">
        <div class="md-footer-meta md-typeset">
          <div class="md-footer-meta__inner md-grid">
            <div class="md-copyright">
              <div class="md-copyright__highlight">Â© 2025 æ´›è°·é¢˜ç›®æµè§ˆç«™</div>
              Made with <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">Material for MkDocs</a>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      if (typeof hljs !== 'undefined') {
        hljs.highlightAll();
      }
    </script>
    <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
    <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, { 
          delimiters: [
            {"left":"$$","right":"$$","display":true},
            {"left":"$","right":"$","display":false},
            {"left":"\\(","right":"\\)","display":false},
            {"left":"\\[","right":"\\]","display":true}
          ],
          throwOnError: false,
          strict: false,
          trust: true
        });
      });
    </script>
  </body>
</html>