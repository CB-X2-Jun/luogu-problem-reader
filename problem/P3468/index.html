<!doctype html>
<html lang="zh">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="LGOJ é¢˜ç›®æµè§ˆç«™ - æ´›è°·é¢˜ç›®è¯¦æƒ…">
    <meta name="author" content="LGOJ Team">
    <link rel="canonical" href="https://lglg.netlify.app/problem/P3468/">
    <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/1336/1336494.png" type="image/png">
    <meta name="generator" content="LGOJ é¢˜ç›®æµè§ˆç«™">
    <title>P3468 P3468 [POI 2008] ROB-Robinson - LGOJ é¢˜ç›®æµè§ˆç«™</title>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      :root {
        --primary-color: #2563eb;
        --primary-dark: #1d4ed8;
        --secondary-color: #10b981;
        --accent-color: #8b5cf6;
        --danger-color: #ef4444;
        --warning-color: #f59e0b;
        --dark-color: #1f2937;
        --light-color: #f9fafb;
        --gray-50: #f9fafb;
        --gray-100: #f3f4f6;
        --gray-200: #e5e7eb;
        --gray-300: #d1d5db;
        --gray-400: #9ca3af;
        --gray-500: #6b7280;
        --gray-600: #4b5563;
        --gray-700: #374151;
        --gray-800: #1f2937;
        --gray-900: #111827;
        --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        --transition: all 0.2s ease-in-out;
      }
      { --md-text-font: "Roboto"; --md-code-font: "Roboto Mono" }
      
      /* LGOJ é¢˜ç›®é¡µé¢æ ·å¼ */
      body {
        font-family: 'Inter', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        background-color: #fff;
        color: var(--gray-900);
        line-height: 1.6;
        margin: 0;
        padding: 0;
      }
      
      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 1rem;
      }
      
      /* é¡µé¢å¤´éƒ¨ */
      .lgoj-header {
        background: white;
        border-bottom: 1px solid var(--gray-200);
        padding: 1rem 0;
        position: sticky;
        top: 0;
        z-index: 100;
        box-shadow: var(--shadow-sm);
      }
      
      .lgoj-header .container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      
      .lgoj-header .logo {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary-color);
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }
      
      .lgoj-header .logo:hover {
        color: var(--primary-dark);
      }
      
      .lgoj-header nav {
        display: flex;
        gap: 2rem;
      }
      
      .lgoj-header nav a {
        color: var(--gray-700);
        text-decoration: none;
        font-weight: 500;
        transition: var(--transition);
      }
      
      .lgoj-header nav a:hover {
        color: var(--primary-color);
      }
      
      /* ä¸»è¦å†…å®¹åŒºåŸŸ */
      .main-content {
        min-height: calc(100vh - 200px);
        padding: 2rem 0;
      }
      
      .problem-content {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: var(--shadow);
      }
      
      /* é¡µè„š */
      .lgoj-footer {
        background: var(--gray-50);
        border-top: 1px solid var(--gray-200);
        padding: 2rem 0;
        text-align: center;
        color: var(--gray-600);
      }
      
      /* é¢˜ç›®æ ‡é¢˜ç¾åŒ– */
      .md-content__inner h1 {
        color: var(--gray-900);
        font-size: 2.5rem;
        font-weight: 800;
        margin-bottom: 2rem;
        text-align: center;
        padding: 2rem 0 1rem 0;
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        border-bottom: 2px solid var(--gray-200);
      }
      
      /* é¢˜ç›®å†…å®¹åŒºå—ç¾åŒ– */
      .md-content__inner h2 {
        background: var(--gray-50);
        color: var(--gray-900);
        padding: 1rem 1.5rem;
        border-radius: 8px;
        border-left: 4px solid var(--primary-color);
        margin: 2rem 0 1rem 0;
        font-size: 1.3rem;
        box-shadow: var(--shadow);
        font-weight: 600;
      }
      
      /* ä»£ç å—ç¾åŒ– */
      .md-content__inner pre {
        background: var(--gray-50);
        border: 1px solid var(--gray-200);
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: var(--shadow);
        margin: 1.5rem 0;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      .md-content__inner pre code {
        background: transparent;
        color: var(--gray-800);
        padding: 0;
        border-radius: 0;
        font-weight: 400;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      .md-content__inner code {
        background: var(--gray-100);
        color: var(--gray-800);
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-weight: 500;
        font-family: 'JetBrains Mono', 'Consolas', monospace;
      }
      
      /* æ ·ä¾‹åŒºå—ç‰¹æ®Šç¾åŒ– */
      .md-content__inner h3 {
        background: linear-gradient(135deg, var(--secondary-color), #059669);
        color: white;
        padding: 0.8rem 1.2rem;
        border-radius: 6px;
        margin: 1.5rem 0 0.8rem 0;
        font-size: 1.1rem;
        box-shadow: var(--shadow);
        font-weight: 600;
      }
      
      /* æ™®é€šæ®µè½ç¾åŒ– */
      .md-content__inner p {
        line-height: 1.8;
        margin: 1rem 0;
        color: var(--gray-700);
        font-size: 1rem;
      }
      
      /* ä¸»è¦å†…å®¹å®¹å™¨ - ç¡®ä¿ä¸è¶…å‡ºé¡µé¢è¾¹ç•Œ */
      .md-content__inner {
        max-width: 100%;
        width: 100%;
        box-sizing: border-box;
        overflow-x: hidden;
        padding: 0 1rem;
      }
      

      
      /* é˜²æ­¢å›¾ç‰‡è¿‡å¤§å½±å“å¸ƒå±€ */
      .md-content__inner img[src*="latex"] {
        display: inline;
        margin: 0;
        box-shadow: none;
        border-radius: 0;
        vertical-align: middle;
      }
      
      /* åˆ—è¡¨ç¾åŒ– */
      .md-content__inner ul, .md-content__inner ol {
        padding-left: 2rem;
        margin: 1rem 0;
      }
      
      .md-content__inner li {
        margin: 0.5rem 0;
        line-height: 1.7;
        color: var(--gray-600);
      }
      
      /* è¡¨æ ¼ç¾åŒ– */
      .md-content__inner table {
        width: 100%;
        border-collapse: collapse;
        margin: 1.5rem 0;
        box-shadow: var(--shadow);
        border-radius: 8px;
        overflow: hidden;
        border: 1px solid var(--gray-200);
      }
      
      .md-content__inner th {
        background: var(--primary-color);
        color: white;
        padding: 1rem;
        text-align: left;
        font-weight: 600;
      }
      
      .md-content__inner td {
        padding: 0.8rem 1rem;
        border-bottom: 1px solid var(--gray-200);
      }
      
      .md-content__inner tr:nth-child(even) {
        background: var(--gray-50);
      }
      
      /* å¼ºè°ƒæ–‡æœ¬ç¾åŒ– */
      .md-content__inner strong {
        color: var(--gray-900);
        font-weight: 600;
      }
      
      .md-content__inner em {
        color: var(--gray-600);
        font-style: italic;
      }
      
      /* é“¾æ¥ç¾åŒ– */
      .md-content__inner a {
        color: var(--primary-color);
        text-decoration: none;
        border-bottom: 1px solid transparent;
        transition: var(--transition);
      }
      
      .md-content__inner a:hover {
        color: var(--primary-dark);
        border-bottom-color: var(--primary-dark);
      }
      
      /* æ´›è°·ç™»å½•åŠŸèƒ½æ ·å¼ */
      .luogu-auth-section {
        margin-left: auto;
      }
      
      .login-btn {
        background: var(--primary-color);
        color: white;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        text-decoration: none;
        font-size: 0.9rem;
        font-weight: 500;
        transition: var(--transition);
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
      }
      
      .login-btn:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
        box-shadow: var(--shadow);
      }
      
      .user-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.5rem;
        background: var(--gray-50);
        border-radius: 8px;
        border: 1px solid var(--gray-200);
      }
      
      .user-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid var(--gray-300);
      }
      
      .user-name {
        font-weight: 500;
        color: var(--gray-700);
        font-size: 0.9rem;
      }
      
      .logout-btn {
        background: none;
        border: none;
        color: var(--gray-500);
        cursor: pointer;
        padding: 0.25rem;
        border-radius: 4px;
        transition: var(--transition);
        display: flex;
        align-items: center;
        justify-content: center;
      }
      
      .logout-btn:hover {
        background: var(--gray-200);
        color: var(--danger-color);
      }
      
      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .luogu-auth-section {
          margin-left: 0;
          margin-top: 0.5rem;
        }
        
        .user-info {
          padding: 0.4rem;
          gap: 0.5rem;
        }
        
        .user-avatar {
          width: 28px;
          height: 28px;
        }
        
        .user-name {
          font-size: 0.8rem;
        }
      }
      
      /* å¼•ç”¨å—ç¾åŒ– */
      .md-content__inner blockquote {
        border-left: 4px solid var(--warning-color);
        background: #fefbf3;
        padding: 1rem 1.5rem;
        margin: 1.5rem 0;
        border-radius: 0 8px 8px 0;
        color: var(--gray-700);
        font-style: italic;
      }
      
      /* æ°´å¹³åˆ†å‰²çº¿ç¾åŒ– */
      .md-content__inner hr {
        border: none;
        height: 2px;
        background: linear-gradient(90deg, transparent, var(--primary-color), transparent);
        margin: 2rem 0;
      }
      
      /* å¯¼èˆªæ å“ç‰Œæ›´æ–° */
      .md-header__title .md-header__ellipsis .md-ellipsis {
        color: var(--primary-color);
        font-weight: 700;
      }
      
      /* è¿”å›é¦–é¡µæŒ‰é’® */
      .return-home-btn {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        text-decoration: none;
        font-weight: 500;
        box-shadow: var(--shadow-lg);
        transition: var(--transition);
        z-index: 1000;
      }
      
      .return-home-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        color: white;
        text-decoration: none;
      }
      
      /* å“åº”å¼è®¾è®¡ */
      @media (max-width: 768px) {
        .md-content__inner {
          padding: 1rem;
        }
        
        .md-content__inner h1 {
          font-size: 2rem;
        }
        
        .md-content__inner h2 {
          font-size: 1.2rem;
          padding: 0.8rem 1rem;
        }
        
        .md-content__inner pre {
          padding: 1rem;
          font-size: 0.9rem;
        }
        
        .lgoj-home-btn {
          position: static;
          margin: 1rem 0;
          width: 100%;
          justify-content: center;
        }
      }
    </style>
    <link rel="stylesheet" href="https://unpkg.com/katex@0/dist/katex.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.9.0/styles/github.min.css">
  </head>
  <body>
    <!-- ç®€æ´çš„é¡µé¢å¤´éƒ¨ -->
    <header class="lgoj-header">
      <div class="container">
        <a href="/" class="logo">
          <i class="fas fa-book"></i>
          LGOJ é¢˜ç›®æµè§ˆç«™
        </a>
        <nav>
          <a href="/">é¦–é¡µ</a>
          <a href="/problem/list">é¢˜åº“</a>
          <a href="/about">å…³äº</a>
          
          <!-- æ´›è°·ç™»å½•çŠ¶æ€åŒºåŸŸ -->
          <div class="luogu-auth-section">
            <!-- æœªç™»å½•çŠ¶æ€ -->
            <div id="loginSection" class="login-section">
              <a href="/login.html" class="login-btn">
                <i class="fas fa-sign-in-alt"></i>
                æ´›è°·ç™»å½•
              </a>
            </div>
            
            <!-- å·²ç™»å½•çŠ¶æ€ -->
            <div id="userInfo" class="user-info" style="display: none;">
              <img id="userAvatar" class="user-avatar" alt="ç”¨æˆ·å¤´åƒ" onclick="goToProfile()" title="ç‚¹å‡»æŸ¥çœ‹ä¸ªäººä¸­å¿ƒ" style="cursor: pointer;">
              <span id="userName" class="user-name">ç”¨æˆ·</span>
              <button onclick="logout()" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
              </button>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <main class="main-content">
      <div class="container">
        <div class="problem-content">
          <h2 id="_1">é¢˜ç›®æè¿°</h2>
<p>Tossed by the storm on a deserted island, Robinson built himself a boat    so that he could go out to the sea and seek out human domicile.</p>
<p>He is an experienced sailor, therefore he built the boat with accordance to the rules    of craftsmanship: it has a longitudinal axis of symmetry and an appropriate    shape. The boat's prow is thin, and it widens gradually towards the boat's centre,    only to gradually narrow once again towards the stern.</p>
<p>In particular, at some point in the middle the boat is wider than both at the    prow and stern.</p>
<p>Unfortunately, Robinson has launched his boat in a most improper space: there    is extremely thick reed all around. It is, moreover, so stiff that the boat    cannot break through. Perhaps Robinson can get to the high seas by carefully    manoeuvring between the reed.</p>
<p>Due to lack of manoeuvrability, the boat can move forward and backward and    even sidewards (leftward or rightward), but it cannot turn.</p>
<p>It is thus allowed, and may be in fact necessary, that the boat moves with    its stern or broadside to the front.</p>
<p>You are to judge if Robinson can get to the high seas.</p>
<p>To make your task easier the island and its surroundings will be    represented by a square map divided into square unit fields, each    occupied by either water, part of Robinson's boat or an obstacle, eg.</p>
<p>land or reed. Initially the boat is set parallel to one of the cardinal    directions, ie. its longitudinal axis of symmetry is parallel to this    direction and the axis bisects the unit fields it is covered with.</p>
<p>We assume that the high seas starts where the map ends.</p>
<p>Hence Robinson may get to the high seas if his boat can leave    the area depicted in the map.</p>
<p>A single move consists in moving the boat to a side-adjacent    field in a chosen direction (north, south, east or west).</p>
<p>The move is permissible if both before and after it the boat    remains entirely in water (it does not occupy a field with an    obstacle).</p>
<p>Task      You are to write a programme that                        reads the map's description from the standard input,                      calculates the minimum possible number of boat's moves that          suffice to completely leave the area depicted in the map,                      writes out this number to the standard output.</p>
<p>è¢«é£æš´æŠ›å¼ƒåœ¨è’å²›ä¸Šçš„é²æ»¨é€Šï¼ˆåˆè¯‘é²æ»¨å­™ï¼‰è‡ªå·±é€ äº†ä¸€æ¡èˆ¹ï¼Œè¿™æ ·ä»–å°±å¯ä»¥å‡ºæµ·å»å¯»æ‰¾æœ‰äººç±»å±…ä½çš„åœ°æ–¹ã€‚</p>
<p>ä»–æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„æ°´æ‰‹ï¼Œå› æ­¤ä»–æ ¹æ®æŠ€æœ¯è§„ç¨‹å»ºé€ äº†å®ƒã€‚å®ƒæœ‰ä¸€æ¡çºµå‘çš„å¯¹ç§°è½´ï¼Œä»¥åŠé€‚äºèˆªè¡Œçš„å¤–å½¢ï¼šèˆ¹å¤´è¾ƒå°–ï¼Œå‘èˆ¹ä¸­é€æ¸æ‰©å®½ï¼Œåˆ°èˆ¹å°¾åˆé€æ¸æ”¶çª„ã€‚</p>
<p>ç‰¹åˆ«çš„æ˜¯ï¼Œèˆ¹ä¸­çš„ä¸€äº›ç‚¹æ¯”èˆ¹å¤´å’Œèˆ¹å°¾éƒ½å®½ã€‚</p>
<p>å¯æ˜¯å¾ˆä¸å¹¸ï¼Œé²æ»¨é€Šåœ¨æœ€ä¸åˆé€‚çš„ä½ç½®è®©ä»–çš„èˆ¹ä¸‹äº†æ°´ï¼šå‘¨å›´æœ‰æå…¶åšçš„èŠ¦è‹‡ã€‚æ­¤å¤–ï¼Œè¿™æ¡èˆ¹å¤ªåƒµç¡¬ä»¥è‡³äºå®ƒæ— æ³•çªç ´èŠ¦è‹‡ã€‚ä¸è¿‡æˆ–è®¸é²æ»¨é€Šå¯ä»¥é€šè¿‡åœ¨èŠ¦è‹‡ä¸­å°å¿ƒç¿¼ç¿¼åœ°æ“çºµèˆ¹å»å¾€å…¬æµ·ã€‚</p>
<p>ç”±äºèˆ¹å¤ªä¸çµæ´»ï¼Œèˆ¹å¯ä»¥å‰è¿›ã€åé€€ç”šè‡³æ¨ªç€ï¼ˆå‘å·¦æˆ–å‘å³ï¼‰ç§»åŠ¨ï¼Œä½†å®ƒä¸èƒ½æ‰å¤´ã€‚</p>
<p>å…è®¸èˆ¹çš„èˆ¹å°¾æˆ–è€…èˆ¹èˆ·åœ¨å‰è¿›è¡Œç§»åŠ¨ï¼Œäº‹å®ä¸Šè¿™å¯èƒ½æ˜¯å¿…è¦çš„ã€‚</p>
<p>ä½ éœ€è¦åˆ¤æ–­é²æ»¨é€Šæ˜¯å¦å¯ä»¥åˆ°è¾¾å…¬æµ·ã€‚</p>
<p>ä¸ºäº†ç®€åŒ–ä½ çš„å·¥ä½œï¼Œå²›å±¿å’Œå‘¨å›´çš„ç¯å¢ƒå°†ç”±ä¸€å¼ åˆ’åˆ†æˆæ–¹æ ¼çš„æ­£æ–¹å½¢åœ°å›¾è¡¨ç¤ºï¼Œæ¯æ ¼åªå¯èƒ½æ˜¯æ°´ã€é²æ»¨é€Šèˆ¹çš„ä¸€éƒ¨åˆ†æˆ–éšœç¢ç‰©ï¼ˆæ¯”å¦‚è¯´å²›å±¿å’ŒèŠ¦è‹‡ï¼‰ã€‚æœ€åˆèˆ¹å¹³è¡Œäºä¸€ä¸ªä¸»è¦æ–¹å‘ï¼ˆæ¢å¥è¯è¯´ï¼Œå³å…¶çºµå‘å¯¹ç§°è½´å¹³è¡Œäºæ­¤æ–¹å‘ä¸”å…¶å¹³åˆ†å…¶è¦†ç›–çš„æ–¹æ ¼ï¼‰</p>
<p>æˆ‘ä»¬å‡å®šåœ°å›¾ä¹‹å¤–å°±æ˜¯å…¬æµ·ã€‚</p>
<p>å› æ­¤ï¼Œå¦‚æœä»–çš„èˆ¹å¯ä»¥ç¦»å¼€åœ°å›¾æç»˜çš„åŒºåŸŸï¼Œé²æ»¨é€Šä¹Ÿè®¸å°±èƒ½åˆ°è¾¾å…¬æµ·äº†ã€‚</p>
<p>ä¸€æ­¥è¡¨ç°ä¸ºèˆ¹å¾€é€‰å®šçš„æ–¹å‘ï¼ˆåŒ—ï¼Œå—ï¼Œä¸œæˆ–è¥¿ï¼‰ç§»åŠ¨ä¸€æ ¼ã€‚</p>
<p>å¦‚æœç§»åŠ¨å‰åçš„èˆ¹ä¿æŒæ•´ä¸ªåœ¨æ°´ä¸­ï¼ˆä¸å æ®ä»»ä½•æœ‰éšœç¢ç‰©çš„æ ¼å­ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ªç§»åŠ¨æ˜¯åˆæ³•çš„ã€‚</p>
<p>ä½ çš„ä»»åŠ¡æ˜¯ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œä»æ ‡å‡†è¾“å…¥ä¸­è¯»å–åœ°å›¾çš„æè¿°ï¼Œè®¡ç®—èˆ¹ç¦»å¼€åœ°å›¾æè¿°çš„åŒºåŸŸçš„æœ€å°‘æ­¥æ•°ï¼Œå¹¶è¾“å‡ºè‡³æ ‡å‡†è¾“å‡ºã€‚</p>
<h2 id="_2">è¾“å…¥æ ¼å¼</h2>
<p>The first line contains one integer $3\le n\le 2000$, denoting the length of the map's side.</p>
<p>In each of the following $n$ lines there are $n$ characters      describing successive fields of the map:</p>
<p>$i^{th}$ character in the $(j+1)^{th}$ line tells the contents      of the field $(i,j)$.</p>
<p>The following characters may appear there:</p>
<p>"." - (dot) denotes a field filled with water,             "X" - denotes an obstacle (land or reed),             "r" - denotes a part of Robinson's boat.
ç¬¬ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•° $$3\le_n\le_2000$,$ è¡¨ç¤ºåœ°å›¾çš„è¾¹é•¿ã€‚</p>
<p>æ¥ä¸‹æ¥ $n$ è¡Œæ¯è¡Œ $n$ ä¸ªå­—ç¬¦è¡¨ç¤ºåœ°å›¾ï¼šï¼ˆæ­¤å¤„çœç•¥ä¸¤å¼ å›¾ç‰‡ï¼‰ç¬¬ $(j+1)$ è¡Œçš„çš„ç¬¬ $i$ ä¸ªå­—ç¬¦è¡¨ç¤ºæ–¹æ ¼ $(i,j)$ã€‚ä»¥ä¸‹çš„å­—ç¬¦å¯èƒ½ä¼šåœ¨è¾“å…¥ä¸­å‡ºç°ï¼š<code>.</code>è¡¨ç¤ºä¸€æ ¼æ°´ï¼Œ<code>X</code> è¡¨ç¤ºä¸€æ ¼éšœç¢ç‰©ï¼ˆå²›å±¿æˆ–èŠ¦è‹‡ï¼‰ï¼Œ<code>R</code> è¡¨ç¤ºé²æ»¨å­™çš„èˆ¹çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h2 id="_3">è¾“å‡ºæ ¼å¼</h2>
<p>Your programme should write out (in the first and only line of      the standard output) a single positive integer, equal to      the minimum number of boat's moves that suffice to completely      leave the area depicted in the map.</p>
<p>Should getting to the high seas be impossible, write out the word      'NIE' ('no' in Polish).</p>
<p>ä½ çš„ç¨‹åºåº”å½“è¾“å‡ºï¼ˆåœ¨æ ‡å‡†è¾“å‡ºçš„ç¬¬ä¸€è¡Œä¸”ä»…æœ‰ä¸€è¡Œï¼‰ä¸€æ ¼æ­£æ•´æ•°è¡¨ç¤ºé²æ»¨é€Šçš„èˆ¹å®Œå…¨ç¦»å¼€åœ°å›¾æ ‡ç¤ºçš„åŒºåŸŸéœ€è¦çš„æœ€å°æ­¥æ•°ã€‚</p>
<p>å¦‚æœé²å®¾é€Šæ— æ³•åˆ°è¾¾å…¬æµ·ï¼Œè¾“å‡ºä¸€è¡Œ <code>NIE</code>ï¼ˆæ³¢å…°è¯­ä¸­å¦å®šçš„æ„æ€ï¼‰</p>
<h2 id="_4">è¾“å…¥è¾“å‡ºæ ·ä¾‹</h2>
<h3 id="1">æ ·ä¾‹ #1</h3>
<h4 id="1_1">æ ·ä¾‹è¾“å…¥ #1</h4>
<div class="codehilite"><pre><span></span><code><span class="mf">10</span>
<span class="mf">..........</span>
<span class="mf">..........</span>
<span class="mf">..</span><span class="n">r</span><span class="mf">.......</span>
<span class="mf">.</span><span class="n">rrrX</span><span class="mf">.....</span>
<span class="n">rrrrr</span><span class="mf">.....</span>
<span class="mf">.</span><span class="n">rrr</span><span class="mf">......</span>
<span class="n">X</span><span class="mf">.</span><span class="n">r</span><span class="mf">.......</span>
<span class="mf">.</span><span class="n">Xr</span><span class="mf">.......</span>
<span class="mf">..........</span>
<span class="mf">..........</span>
</code></pre></div>

<h4 id="1_2">æ ·ä¾‹è¾“å‡º #1</h4>
<div class="codehilite"><pre><span></span><code><span class="mf">10</span>
</code></pre></div>
        </div>
        
        <!-- è¯„è®ºåŒºåŸŸ -->
        <div class="comments-section">
          <div class="comments-title">
            ğŸ’¬ è®¨è®ºäº¤æµ
          </div>
          <script src="https://giscus.app/client.js"
                  data-repo="Eternity-Sky/luogu-problem-reader"
                  data-repo-id="R_kgDOPiP5uw"
                  data-category="Announcements"
                  data-category-id="DIC_kwDOPiP5u84CugHo"
                  data-mapping="url"
                  data-strict="0"
                  data-reactions-enabled="1"
                  data-emit-metadata="0"
                  data-input-position="bottom"
                  data-theme="light"
                  data-lang="zh-CN"
                  crossorigin="anonymous"
                  async>
          </script>
        </div>
      </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="lgoj-footer">
      <div class="container">
        <p>Â© 2025 LGOJ é¢˜ç›®æµè§ˆç«™ | æ´›è°·é¢˜ç›®é™æ€æµè§ˆå¹³å°</p>
      </div>
    </footer>

    <!-- è¿”å›é¦–é¡µæŒ‰é’® -->
    <a href="/" class="return-home-btn">
      <i class="fas fa-home"></i>
      è¿”å›é¦–é¡µ
    </a>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
      if (typeof hljs !== 'undefined') {
        hljs.highlightAll();
      }
    </script>
    <script src="https://unpkg.com/katex@0/dist/katex.min.js"></script>
    <script src="https://unpkg.com/katex@0/dist/contrib/auto-render.min.js"></script>
    <script>
      // æ´›è°·APIä»£ç†å‡½æ•°
      async function proxyLuoguAPI(path, options = {}) {
        const { method = 'GET', body, headers = {}, sessionId } = options;
        
        const requestData = {
          path,
          method,
          headers,
          sessionId: sessionId || localStorage.getItem('luogu_session_id')
        };
        
        if (body) {
          requestData.body = body;
        }
        
        try {
          const response = await fetch('/netlify/functions/luogu-proxy', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(requestData)
          });
          
          return response;
        } catch (error) {
          console.error('ä»£ç†è¯·æ±‚å¤±è´¥:', error);
          throw error;
        }
      }
      
      // æ£€æŸ¥ç™»å½•çŠ¶æ€
      async function checkLoginStatus() {
        console.log('ğŸ” æ£€æŸ¥æ´›è°·ç™»å½•çŠ¶æ€...');
        
        // é¦–å…ˆæ£€æŸ¥localStorageä¸­æ˜¯å¦æœ‰ç”¨æˆ·ä¿¡æ¯
        const savedUserInfo = localStorage.getItem('luogu_user_info');
        if (savedUserInfo) {
          try {
            const userInfo = JSON.parse(savedUserInfo);
            console.log('âœ… ä»localStorageæ‰¾åˆ°ç”¨æˆ·ä¿¡æ¯:', userInfo);
            
            // æ£€æŸ¥ç™»å½•æ—¶é—´æ˜¯å¦è¿‡æœŸï¼ˆ24å°æ—¶ï¼‰
            const loginTime = new Date(userInfo.loginTime);
            const now = new Date();
            const hoursDiff = (now - loginTime) / (1000 * 60 * 60);
            
            if (hoursDiff < 24) {
              console.log(`âœ… ç”¨æˆ·ä¿¡æ¯æœ‰æ•ˆï¼ˆ${hoursDiff.toFixed(1)}å°æ—¶å‰ç™»å½•ï¼‰`);
              showUserInfo({
                name: userInfo.name || userInfo.username,
                uid: userInfo.uid,
                username: userInfo.username,
                avatar: userInfo.avatar
              });
              return true;
            } else {
              console.log('âš ï¸ ç”¨æˆ·ä¿¡æ¯å·²è¿‡æœŸï¼Œæ¸…é™¤localStorage');
              localStorage.removeItem('luogu_user_info');
            }
          } catch (error) {
            console.error('è§£ælocalStorageç”¨æˆ·ä¿¡æ¯å¤±è´¥:', error);
            localStorage.removeItem('luogu_user_info');
          }
        }
        
        showLoginButton();
        return false;
      }
      
      // æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯
      function showUserInfo(user) {
        const userInfo = document.getElementById('userInfo');
        const loginSection = document.getElementById('loginSection');
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        
        if (!userInfo || !loginSection || !userAvatar || !userName) {
          console.log('âš ï¸ ç”¨æˆ·ä¿¡æ¯å…ƒç´ æœªæ‰¾åˆ°ï¼Œè·³è¿‡æ˜¾ç¤º');
          return;
        }
        
        // è®¾ç½®ç”¨æˆ·å¤´åƒ
        const defaultAvatar = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNmMGYwZjAiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEyIDEyQzE0LjIwOTEgMTIgMTYgMTAuMjA5MSAxNiA4QzE2IDUuNzkwODYgMTQuMjA5MSA0IDEyIDRDOS43OTA4NiA0IDggNS43OTA4NiA4IDhDOCAxMC4yMDkxIDkuNzkwODYgMTIgMTIgMTJaIiBmaWxsPSIjOTk5Ii8+CjxwYXRoIGQ9Ik0xMiAxNEM5LjMzIDEzLjk5IDcgMTYuMzYgNyAxOS4wOVYyMEgxN1YxOS4wOUMxNyAxNi4zNiAxNC42NyAxMy45OSAxMiAxNFoiIGZpbGw9IiM5OTkiLz4KPC9zdmc+Cjwvc3ZnPgo8L3N2Zz4K';
        
        if (user.uid) {
          // æœ‰UIDï¼Œå°è¯•åŠ è½½çœŸå®å¤´åƒ
          userAvatar.src = `https://cdn.luogu.com.cn/upload/usericon/${user.uid}.png`;
          userAvatar.onerror = function() {
            console.log('çœŸå®å¤´åƒåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤å¤´åƒ');
            this.src = defaultAvatar;
            this.onerror = null; // é˜²æ­¢æ— é™å¾ªç¯
          };
        } else {
          // æ²¡æœ‰UIDï¼Œç›´æ¥ä½¿ç”¨é»˜è®¤å¤´åƒ
          userAvatar.src = defaultAvatar;
        }
        
        // è®¾ç½®ç”¨æˆ·å
        userName.textContent = user.name || user.username || 'ç”¨æˆ·';
        
        // æ˜¾ç¤ºç”¨æˆ·ä¿¡æ¯ï¼Œéšè—ç™»å½•æŒ‰é’®
        userInfo.style.display = 'flex';
        loginSection.style.display = 'none';
      }
      
      // æ˜¾ç¤ºç™»å½•æŒ‰é’®
      function showLoginButton() {
        const userInfo = document.getElementById('userInfo');
        const loginSection = document.getElementById('loginSection');
        
        if (userInfo && loginSection) {
          userInfo.style.display = 'none';
          loginSection.style.display = 'block';
        }
      }
      
      // é€€å‡ºç™»å½•
      async function logout() {
        try {
          // æ¸…é™¤localStorageä¸­çš„ç”¨æˆ·ä¿¡æ¯å’Œä¼šè¯ID
          localStorage.removeItem('luogu_user_info');
          localStorage.removeItem('luogu_session_id');
          console.log('ğŸšª å·²æ¸…é™¤ç”¨æˆ·ä¿¡æ¯å’Œä¼šè¯ID');
          
          showLoginButton();
          
          // å¯é€‰ï¼šè°ƒç”¨æ´›è°·é€€å‡ºAPI
          try {
            await proxyLuoguAPI('/api/auth/logout', { method: 'POST' });
          } catch (e) {
            // å¿½ç•¥é€€å‡ºAPIé”™è¯¯
            console.log('é€€å‡ºAPIè°ƒç”¨å¤±è´¥ï¼Œä½†æœ¬åœ°æ¸…ç†å·²å®Œæˆ');
          }
          
          console.log('âœ… å·²æˆåŠŸé€€å‡ºç™»å½•');
        } catch (error) {
          console.error('é€€å‡ºç™»å½•å¤±è´¥:', error);
        }
      }
      
      // è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ
      function goToProfile() {
        window.location.href = '/profile.html';
      }
      
      document.addEventListener("DOMContentLoaded", function() {
        // æ£€æŸ¥æ´›è°·ç™»å½•çŠ¶æ€
        checkLoginStatus();
        
        // æ¸²æŸ“æ•°å­¦å…¬å¼
        renderMathInElement(document.body, {
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false},
            {left: '\\(', right: '\\)', display: false},
            {left: '\\[', right: '\\]', display: true}
          ],
          throwOnError: false
        });
      });
    </script>
  </body>
</html>